<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ruby_on_rails/docker_with_ror" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Ruby on Rails với Docker | Avengers Handbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://avengerscodelovers.github.io/engineering-wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://avengerscodelovers.github.io/engineering-wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://avengerscodelovers.github.io/engineering-wiki/docs/ruby_on_rails/docker_with_ror/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ruby on Rails với Docker | Avengers Handbook"><meta data-rh="true" name="description" content="1. Giới Thiệu"><meta data-rh="true" property="og:description" content="1. Giới Thiệu"><link data-rh="true" rel="icon" href="/engineering-wiki/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://avengerscodelovers.github.io/engineering-wiki/docs/ruby_on_rails/docker_with_ror/"><link data-rh="true" rel="alternate" href="https://avengerscodelovers.github.io/engineering-wiki/docs/ruby_on_rails/docker_with_ror/" hreflang="en"><link data-rh="true" rel="alternate" href="https://avengerscodelovers.github.io/engineering-wiki/docs/ruby_on_rails/docker_with_ror/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/engineering-wiki/blog/rss.xml" title="Avengers Handbook RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/engineering-wiki/blog/atom.xml" title="Avengers Handbook Atom Feed"><link rel="stylesheet" href="/engineering-wiki/assets/css/styles.1c022e41.css">
<script src="/engineering-wiki/assets/js/runtime~main.50991418.js" defer="defer"></script>
<script src="/engineering-wiki/assets/js/main.1e750020.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/engineering-wiki/"><div class="navbar__logo"><img src="/engineering-wiki/img/logo-avengers.png" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/engineering-wiki/img/logo-avengers.png" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Avengers Handbook</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/engineering-wiki/docs/overview/">Standards</a><a class="navbar__item navbar__link" href="/engineering-wiki/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/AvengersCodeLovers/engineering-wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/engineering-wiki/docs/overview/">Tổng quan</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/engineering-wiki/docs/category/javascript/">Javascript</a><button aria-label="Expand sidebar category &#x27;Javascript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/engineering-wiki/docs/category/php/">PHP</a><button aria-label="Expand sidebar category &#x27;PHP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/engineering-wiki/docs/category/ruby-on-rails/">Ruby On Rails</a><button aria-label="Collapse sidebar category &#x27;Ruby On Rails&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering-wiki/docs/ruby_on_rails/init_project/">Init Project, Gem phổ biến</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering-wiki/docs/ruby_on_rails/coding-conventions/">Coding conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/engineering-wiki/docs/ruby_on_rails/docker_with_ror/">Ruby on Rails với Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering-wiki/docs/ruby_on_rails/deploy/">deploy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/engineering-wiki/docs/category/performance-testing/">Performance Testing</a><button aria-label="Expand sidebar category &#x27;Performance Testing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/engineering-wiki/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering-wiki/docs/category/ruby-on-rails/"><span itemprop="name">Ruby On Rails</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Ruby on Rails với Docker</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Ruby on Rails với Docker</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-giới-thiệu">1. Giới Thiệu<a href="#1-giới-thiệu" class="hash-link" aria-label="Direct link to 1. Giới Thiệu" title="Direct link to 1. Giới Thiệu">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-mục-đích">1.1. Mục Đích<a href="#11-mục-đích" class="hash-link" aria-label="Direct link to 1.1. Mục Đích" title="Direct link to 1.1. Mục Đích">​</a></h3>
<p>Mục đích của bộ tiêu chuẩn này là hướng dẫn cách thiết l ập môi trường phát triển Ruby on Rails sử dụng Docker.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-đối-tượng-sử-dụng">1.2. Đối Tượng Sử Dụng<a href="#12-đối-tượng-sử-dụng" class="hash-link" aria-label="Direct link to 1.2. Đối Tượng Sử Dụng" title="Direct link to 1.2. Đối Tượng Sử Dụng">​</a></h3>
<p>Các nhà phát triển Ruby on Rails, đội ngũ IT, và bất kỳ ai muốn thiết lập môi trường Rails với Docker.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-cài-đặt-các-công-cụ-cần-thiết">2. Cài Đặt Các Công Cụ Cần Thiết<a href="#2-cài-đặt-các-công-cụ-cần-thiết" class="hash-link" aria-label="Direct link to 2. Cài Đặt Các Công Cụ Cần Thiết" title="Direct link to 2. Cài Đặt Các Công Cụ Cần Thiết">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-cài-đặt-docker">2.1. Cài Đặt Docker<a href="#21-cài-đặt-docker" class="hash-link" aria-label="Direct link to 2.1. Cài Đặt Docker" title="Direct link to 2.1. Cài Đặt Docker">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hướng-dẫn-cài-đặt">Hướng Dẫn Cài Đặt<a href="#hướng-dẫn-cài-đặt" class="hash-link" aria-label="Direct link to Hướng Dẫn Cài Đặt" title="Direct link to Hướng Dẫn Cài Đặt">​</a></h4>
<ul>
<li><strong>Windows:</strong> <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener noreferrer">Hướng dẫn cài đặt Docker trên Windows</a></li>
<li><strong>macOS:</strong> <a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener noreferrer">Hướng dẫn cài đặt Docker trên macOS</a></li>
<li><strong>Linux:</strong> <a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">Hướng dẫn cài đặt Docker trên Linux</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tài-liệu-tham-khảo">Tài Liệu Tham Khảo<a href="#tài-liệu-tham-khảo" class="hash-link" aria-label="Direct link to Tài Liệu Tham Khảo" title="Direct link to Tài Liệu Tham Khảo">​</a></h4>
<p><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker Documentation</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-cài-đặt-docker-compose">2.2. Cài Đặt Docker Compose<a href="#22-cài-đặt-docker-compose" class="hash-link" aria-label="Direct link to 2.2. Cài Đặt Docker Compose" title="Direct link to 2.2. Cài Đặt Docker Compose">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hướng-dẫn-cài-đặt-1">Hướng Dẫn Cài Đặt<a href="#hướng-dẫn-cài-đặt-1" class="hash-link" aria-label="Direct link to Hướng Dẫn Cài Đặt" title="Direct link to Hướng Dẫn Cài Đặt">​</a></h4>
<ul>
<li><strong>Windows/macOS/Linux:</strong> <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Hướng dẫn cài đặt Docker Compose</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tài-liệu-tham-khảo-1">Tài Liệu Tham Khảo<a href="#tài-liệu-tham-khảo-1" class="hash-link" aria-label="Direct link to Tài Liệu Tham Khảo" title="Direct link to Tài Liệu Tham Khảo">​</a></h4>
<ul>
<li><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose Documentation</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-cấu-hình-docker">3. Cấu Hình Docker<a href="#3-cấu-hình-docker" class="hash-link" aria-label="Direct link to 3. Cấu Hình Docker" title="Direct link to 3. Cấu Hình Docker">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-tạo-dockerfile">3.1. Tạo Dockerfile<a href="#31-tạo-dockerfile" class="hash-link" aria-label="Direct link to 3.1. Tạo Dockerfile" title="Direct link to 3.1. Tạo Dockerfile">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mục-đích">Mục Đích<a href="#mục-đích" class="hash-link" aria-label="Direct link to Mục Đích" title="Direct link to Mục Đích">​</a></h4>
<p>Giải thích mục đích của Dockerfile trong việc xây dựng Docker image.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nội-dung">Nội Dung<a href="#nội-dung" class="hash-link" aria-label="Direct link to Nội Dung" title="Direct link to Nội Dung">​</a></h4>
<ul>
<li>
<p>Cài đặt Ruby và các dependencies.</p>
</li>
<li>
<p>Sao chép mã nguồn vào container.</p>
</li>
<li>
<p>Thiết lập lệnh khởi động container.</p>
</li>
<li>
<p>File cấu hình:</p>
</li>
</ul>
<div class="language-DockerFile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sử dụng image của Ruby</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM ruby:3.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV APP_ROOT /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cài đặt các gói phụ thuộc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update -qq &amp;&amp; apt-get install -y \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    build-essential \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    libpq-dev \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodejs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yarn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Thiết lập thư mục làm việc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Sao chép file Gemfile và Gemfile.lock vào thư mục làm việc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY ./Gemfile $APP_ROOT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY ./Gemfile.lock $APP_ROOT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cài đặt các gem được liệt kê trong Gemfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN bundle install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Sao chép toàn bộ mã nguồn ứng dụng vào thư mục làm việc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . $APP_ROOT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Timezone (nếu cần)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN ln -sf  /usr/share/zoneinfo/Asia/Ho_CHi_Minh /etc/localtime</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-tạo-docker-composeyml">3.2. Tạo docker-compose.yml<a href="#32-tạo-docker-composeyml" class="hash-link" aria-label="Direct link to 3.2. Tạo docker-compose.yml" title="Direct link to 3.2. Tạo docker-compose.yml">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mục-đích-1">Mục Đích<a href="#mục-đích-1" class="hash-link" aria-label="Direct link to Mục Đích" title="Direct link to Mục Đích">​</a></h4>
<p>Giải thích vai trò của docker-compose.yml trong việc quản lý các dịch vụ.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nội-dung-1">Nội Dung<a href="#nội-dung-1" class="hash-link" aria-label="Direct link to Nội Dung" title="Direct link to Nội Dung">​</a></h4>
<ul>
<li>
<p>Cấu hình dịch vụ cho Ruby on Rails.</p>
</li>
<li>
<p>Cấu hình dịch vụ cho cơ sở dữ liệu (PostgreSQL, MySQL, etc.).</p>
</li>
<li>
<p>Cấu hình mạng và volume.</p>
</li>
<li>
<p>File cấu hình: <a target="_blank" href="/engineering-wiki/assets/files/docker-compose-a881f03ce10a105eff1b444c70decfe8.yml/">docker-compose</a></p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-tạo-dockerignore">3.3. Tạo .dockerignore<a href="#33-tạo-dockerignore" class="hash-link" aria-label="Direct link to 3.3. Tạo .dockerignore" title="Direct link to 3.3. Tạo .dockerignore">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mục-đích-2">Mục Đích<a href="#mục-đích-2" class="hash-link" aria-label="Direct link to Mục Đích" title="Direct link to Mục Đích">​</a></h4>
<p>Giải thích vai trò của .dockerignore trong việc loại bỏ các tập tin không cần thiết khi build Docker image.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nội-dung-2">Nội Dung<a href="#nội-dung-2" class="hash-link" aria-label="Direct link to Nội Dung" title="Direct link to Nội Dung">​</a></h4>
<p>Các mục nên được loại bỏ như thư mục node_modules, log, tmp, etc.</p>
<ul>
<li>File cấu hình:</li>
</ul>
<div class="language-.dockerignore codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-.dockerignore codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmp/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!.gitkeep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.bundle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vendor/bundle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node_modules</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-cấu-hình-database-mailhog-sideki">3.4 Cấu hình database, mailhog, sideki<a href="#34-cấu-hình-database-mailhog-sideki" class="hash-link" aria-label="Direct link to 3.4 Cấu hình database, mailhog, sideki" title="Direct link to 3.4 Cấu hình database, mailhog, sideki">​</a></h3>
<p>Các file cấu hình như database.yml, mailhog, sidekiq.yml vẫn được cấu hình như bình thường, có thể tham khảo</p>
<ul>
<li>Database.yml: <a target="_blank" href="/engineering-wiki/assets/files/database-0fb8e17b213645afafe8c40a19e82c56.yml/">database.yml</a></li>
<li>Sidekiq.yml: <a target="_blank" href="/engineering-wiki/assets/files/sidekiq-bcce5e2150998c9a7415a407c94eacc2.yml/">sidekiq.yml</a></li>
<li>Mailhog:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#config/environments/development.rb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.action_mailer.delivery_method = :smtp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.action_mailer.smtp_settings = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address: ENV[&#x27;MAILHOG_HOST&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 1025</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-một-số-cli-rails-hay-được-sử-dụng-với-docker">4. Một số CLI rails hay được sử dụng với Docker<a href="#4-một-số-cli-rails-hay-được-sử-dụng-với-docker" class="hash-link" aria-label="Direct link to 4. Một số CLI rails hay được sử dụng với Docker" title="Direct link to 4. Một số CLI rails hay được sử dụng với Docker">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-docker-build-up-down">4.1. docker build, up, down<a href="#41-docker-build-up-down" class="hash-link" aria-label="Direct link to 4.1. docker build, up, down" title="Direct link to 4.1. docker build, up, down">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-docker-start-restart-stop-container">4.2. docker start, restart, stop container<a href="#42-docker-start-restart-stop-container" class="hash-link" aria-label="Direct link to 4.2. docker start, restart, stop container" title="Direct link to 4.2. docker start, restart, stop container">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose start {service_name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose restart {service_name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose stop {service_name}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-create-migrate-database-bundle">4.3. create, migrate database, bundle<a href="#43-create-migrate-database-bundle" class="hash-link" aria-label="Direct link to 4.3. create, migrate database, bundle" title="Direct link to 4.3. create, migrate database, bundle">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose exec runner bundle install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose exec runner rake db:create db:migrate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-rails-c-attach-with-bindingpry">4.4. rails c, attach with binding.pry<a href="#44-rails-c-attach-with-bindingpry" class="hash-link" aria-label="Direct link to 4.4. rails c, attach with binding.pry" title="Direct link to 4.4. rails c, attach with binding.pry">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose exec runner rails c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker attach {container_id}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-kết-luận">5. Kết luận<a href="#5-kết-luận" class="hash-link" aria-label="Direct link to 5. Kết luận" title="Direct link to 5. Kết luận">​</a></h2>
<p>Bên trên là những config hay dùng đối với các dự án Ruby on Rails thường gặp, tùy dự án, thì chúng ta sẽ có các tùy chỉnh riêng. Việc sử dụng <code>Docker</code> mang lại tính nhất quán trong môi trường phát triển, dễ dàng triển khai, mở rộng. Và đặc biệt nó sẽ dễ dàng tích hợp với CI/CD và K8s, phù hợp với định hướng deploy mới của Sun* trong tương lai.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/AvengersCodeLovers/engineering-wiki/tree/main/docs/ruby_on_rails/docker_with_ror.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/engineering-wiki/docs/ruby_on_rails/coding-conventions/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Coding conventions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engineering-wiki/docs/ruby_on_rails/deploy/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">deploy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-giới-thiệu" class="table-of-contents__link toc-highlight">1. Giới Thiệu</a><ul><li><a href="#11-mục-đích" class="table-of-contents__link toc-highlight">1.1. Mục Đích</a></li><li><a href="#12-đối-tượng-sử-dụng" class="table-of-contents__link toc-highlight">1.2. Đối Tượng Sử Dụng</a></li></ul></li><li><a href="#2-cài-đặt-các-công-cụ-cần-thiết" class="table-of-contents__link toc-highlight">2. Cài Đặt Các Công Cụ Cần Thiết</a><ul><li><a href="#21-cài-đặt-docker" class="table-of-contents__link toc-highlight">2.1. Cài Đặt Docker</a></li><li><a href="#22-cài-đặt-docker-compose" class="table-of-contents__link toc-highlight">2.2. Cài Đặt Docker Compose</a></li></ul></li><li><a href="#3-cấu-hình-docker" class="table-of-contents__link toc-highlight">3. Cấu Hình Docker</a><ul><li><a href="#31-tạo-dockerfile" class="table-of-contents__link toc-highlight">3.1. Tạo Dockerfile</a></li><li><a href="#32-tạo-docker-composeyml" class="table-of-contents__link toc-highlight">3.2. Tạo docker-compose.yml</a></li><li><a href="#33-tạo-dockerignore" class="table-of-contents__link toc-highlight">3.3. Tạo .dockerignore</a></li><li><a href="#34-cấu-hình-database-mailhog-sideki" class="table-of-contents__link toc-highlight">3.4 Cấu hình database, mailhog, sideki</a></li></ul></li><li><a href="#4-một-số-cli-rails-hay-được-sử-dụng-với-docker" class="table-of-contents__link toc-highlight">4. Một số CLI rails hay được sử dụng với Docker</a><ul><li><a href="#41-docker-build-up-down" class="table-of-contents__link toc-highlight">4.1. docker build, up, down</a></li><li><a href="#42-docker-start-restart-stop-container" class="table-of-contents__link toc-highlight">4.2. docker start, restart, stop container</a></li><li><a href="#43-create-migrate-database-bundle" class="table-of-contents__link toc-highlight">4.3. create, migrate database, bundle</a></li><li><a href="#44-rails-c-attach-with-bindingpry" class="table-of-contents__link toc-highlight">4.4. rails c, attach with binding.pry</a></li></ul></li><li><a href="#5-kết-luận" class="table-of-contents__link toc-highlight">5. Kết luận</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/engineering-wiki/docs/overview/">Standards</a></li><li class="footer__item"><a href="https://tutorial.docusaurus.io/docs/category/tutorial---basics" target="_blank" rel="noopener noreferrer" class="footer__link-item">How to write docs?</a></li></ul></div><div class="col footer__col"><div class="footer__title">Services</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://avengers.sun-asterisk.vn" target="_blank" rel="noopener noreferrer" class="footer__link-item">aPortal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://sal.vn" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAL<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/engineering-wiki/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/AvengersCodeLovers/engineering-wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Avengers Code Lovers. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>