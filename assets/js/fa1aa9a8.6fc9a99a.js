"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5335],{600:(n,e,c)=>{c.r(e),c.d(e,{assets:()=>h,contentTitle:()=>d,default:()=>a,frontMatter:()=>s,metadata:()=>t,toc:()=>o});var i=c(4848),r=c(8453);const s={sidebar_position:4},d="Docker c\u01a1 b\u1ea3n cho d\u1ef1 \xe1n Node.js",t={id:"javascript/docker-nodejs",title:"Docker c\u01a1 b\u1ea3n cho d\u1ef1 \xe1n Node.js",description:"Gi\u1edbi thi\u1ec7u",source:"@site/docs/javascript/docker-nodejs.md",sourceDirName:"javascript",slug:"/javascript/docker-nodejs",permalink:"/engineering-wiki/docs/javascript/docker-nodejs",draft:!1,unlisted:!1,editUrl:"https://github.com/AvengersCodeLovers/engineering-wiki/tree/main/docs/javascript/docker-nodejs.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Prettier",permalink:"/engineering-wiki/docs/javascript/prettier"},next:{title:"Deploy \u1ee9ng d\u1ee5ng NodeJS v\u1edbi pm2",permalink:"/engineering-wiki/docs/javascript/deploy-pm2"}},h={},o=[{value:"Gi\u1edbi thi\u1ec7u",id:"gi\u1edbi-thi\u1ec7u",level:2},{value:"C\xe1c command Docker th\u01b0\u1eddng g\u1eb7p",id:"c\xe1c-command-docker-th\u01b0\u1eddng-g\u1eb7p",level:2},{value:"V\xed d\u1ee5 s\u1eed d\u1ee5ng Docker v\u1edbi d\u1ef1 \xe1n Node.js",id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-docker-v\u1edbi-d\u1ef1-\xe1n-nodejs",level:2},{value:"Docker Compose v\u1edbi \u1ee9ng d\u1ee5ng NodeJS",id:"docker-compose-v\u1edbi-\u1ee9ng-d\u1ee5ng-nodejs",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"docker-c\u01a1-b\u1ea3n-cho-d\u1ef1-\xe1n-nodejs",children:"Docker c\u01a1 b\u1ea3n cho d\u1ef1 \xe1n Node.js"}),"\n",(0,i.jsx)(e.h2,{id:"gi\u1edbi-thi\u1ec7u",children:"Gi\u1edbi thi\u1ec7u"}),"\n",(0,i.jsx)(e.p,{children:"Docker l\xe0 m\u1ed9t c\xf4ng c\u1ee5 container h\xf3a m\u1ea1nh m\u1ebd, cho ph\xe9p b\u1ea1n \u0111\xf3ng g\xf3i \u1ee9ng d\u1ee5ng v\xe0 t\u1ea5t c\u1ea3 c\xe1c ph\u1ee5 thu\u1ed9c c\u1ee7a n\xf3 v\xe0o m\u1ed9t container \u0111\u1ed9c l\u1eadp. \u0110i\u1ec1u n\xe0y \u0111\u1ea3m b\u1ea3o t\xednh nh\u1ea5t qu\xe1n c\u1ee7a m\xf4i tr\u01b0\u1eddng l\xe0m vi\u1ec7c v\xe0 d\u1ec5 d\xe0ng tri\u1ec3n khai \u1ee9ng d\u1ee5ng. Trong b\xe0i vi\u1ebft n\xe0y, ch\xfang ta s\u1ebd t\xecm hi\u1ec3u m\u1ed9t s\u1ed1 l\u1ec7nh Docker c\u01a1 b\u1ea3n th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong qu\xe1 tr\xecnh ph\xe1t tri\u1ec3n v\xe0 qu\u1ea3n l\xfd c\xe1c \u1ee9ng d\u1ee5ng Node.js."}),"\n",(0,i.jsx)(e.h2,{id:"c\xe1c-command-docker-th\u01b0\u1eddng-g\u1eb7p",children:"C\xe1c command Docker th\u01b0\u1eddng g\u1eb7p"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"docker ps"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Ch\u1ee9c n\u0103ng: Li\u1ec7t k\xea c\xe1c container \u0111ang ch\u1ea1y."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u0110\u1ec3 xem t\u1ea5t c\u1ea3 c\xe1c container (c\u1ea3 \u0111ang ch\u1ea1y v\xe0 \u0111\xe3 d\u1eebng), s\u1eed d\u1ee5ng:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"2",children:["\n",(0,i.jsx)(e.li,{children:"docker inspect"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Ch\u1ee9c n\u0103ng: Xem chi ti\u1ebft th\xf4ng tin c\u1ee7a m\u1ed9t container."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker inspect <t\xean_container_ho\u1eb7c_id>\n"})}),"\n",(0,i.jsx)(e.p,{children:"V\xed d\u1ee5:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker inspect my_node_app\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"3",children:["\n",(0,i.jsx)(e.li,{children:"docker attach"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Ch\u1ee9c n\u0103ng: G\u1eafn terminal v\xe0o m\u1ed9t container \u0111ang ch\u1ea1y."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker attach <t\xean_container_ho\u1eb7c_ID>\n"})}),"\n",(0,i.jsx)(e.p,{children:"L\u01b0u \xfd: \u0110\u1ec3 tho\xe1t kh\u1ecfi terminal, nh\u1ea5n Ctrl+P r\u1ed3i Ctrl+Q."}),"\n",(0,i.jsxs)(e.ol,{start:"4",children:["\n",(0,i.jsx)(e.li,{children:"docker run -it"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Ch\u1ee9c n\u0103ng: T\u1ea1o v\xe0 kh\u1edfi \u0111\u1ed9ng m\u1ed9t container t\u01b0\u01a1ng t\xe1c, \u0111\u1ed3ng th\u1eddi g\u1eafn terminal v\xe0o container \u0111\xf3."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker run -it <t\xean_image> <c\xe2u_l\u1ec7nh>\n"})}),"\n",(0,i.jsx)(e.p,{children:"V\xed d\u1ee5:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker run -it node:20 bash\n"})}),"\n",(0,i.jsx)(e.h2,{id:"v\xed-d\u1ee5-s\u1eed-d\u1ee5ng-docker-v\u1edbi-d\u1ef1-\xe1n-nodejs",children:"V\xed d\u1ee5 s\u1eed d\u1ee5ng Docker v\u1edbi d\u1ef1 \xe1n Node.js"}),"\n",(0,i.jsx)(e.p,{children:"V\xed d\u1ee5 v\u1ec1 Dockerfile"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dockerfile",children:'FROM node:20-alpine\n\nWORKDIR /app\n\nCOPY package*.json ./\n\nRUN npm install\n\nCOPY . .\n\nCMD ["npm", "start"]\n'})}),"\n",(0,i.jsx)(e.p,{children:"Gi\u1ea3i th\xedch:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"FROM node:20-alpine\n\xdd ngh\u0129a: D\xf2ng n\xe0y ch\u1ec9 \u0111\u1ecbnh image c\u01a1 s\u1edf cho vi\u1ec7c x\xe2y d\u1ef1ng image m\u1edbi.\nnode:20-alpine: S\u1eed d\u1ee5ng image Node.js phi\xean b\u1ea3n 20 d\u1ef1a tr\xean h\u1ec7 \u0111i\u1ec1u h\xe0nh Alpine Linux. Alpine Linux l\xe0 m\u1ed9t h\u1ec7 \u0111i\u1ec1u h\xe0nh nh\u1ecf g\u1ecdn, th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea1o c\xe1c image Docker nh\u1eb9."}),"\n",(0,i.jsx)(e.li,{children:"WORKDIR /app\n\xdd ngh\u0129a: Thi\u1ebft l\u1eadp th\u01b0 m\u1ee5c l\xe0m vi\u1ec7c trong container l\xe0 /app. T\u1ea5t c\u1ea3 c\xe1c l\u1ec7nh sau s\u1ebd \u0111\u01b0\u1ee3c th\u1ef1c thi trong th\u01b0 m\u1ee5c n\xe0y."}),"\n",(0,i.jsx)(e.li,{children:"COPY package*.json ./\n\xdd ngh\u0129a: Sao ch\xe9p c\xe1c file package.json v\xe0 package-lock.json t\u1eeb th\u01b0 m\u1ee5c hi\u1ec7n t\u1ea1i c\u1ee7a m\xe1y ch\u1ee7 v\xe0o th\u01b0 m\u1ee5c /app trong container."}),"\n",(0,i.jsx)(e.li,{children:"RUN npm install\n\xdd ngh\u0129a: Ch\u1ea1y l\u1ec7nh npm install trong th\u01b0 m\u1ee5c /app \u0111\u1ec3 c\xe0i \u0111\u1eb7t c\xe1c dependency \u0111\u01b0\u1ee3c li\u1ec7t k\xea trong package.json."}),"\n",(0,i.jsx)(e.li,{children:"COPY . .\n\xdd ngh\u0129a: Sao ch\xe9p to\xe0n b\u1ed9 n\u1ed9i dung c\u1ee7a th\u01b0 m\u1ee5c hi\u1ec7n t\u1ea1i tr\xean m\xe1y ch\u1ee7 v\xe0o th\u01b0 m\u1ee5c /app trong container. \u0110i\u1ec1u n\xe0y bao g\u1ed3m code \u1ee9ng d\u1ee5ng, c\xe1c file c\u1ea5u h\xecnh, v.v."}),"\n",(0,i.jsx)(e.li,{children:'CMD ["npm", "start"]\n\xdd ngh\u0129a: Ch\u1ec9 \u0111\u1ecbnh l\u1ec7nh m\u1eb7c \u0111\u1ecbnh s\u1ebd \u0111\u01b0\u1ee3c th\u1ef1c thi khi container kh\u1edfi \u0111\u1ed9ng. Trong tr\u01b0\u1eddng h\u1ee3p n\xe0y, l\u1ec7nh npm start s\u1ebd \u0111\u01b0\u1ee3c ch\u1ea1y \u0111\u1ec3 kh\u1edfi \u0111\u1ed9ng \u1ee9ng d\u1ee5ng Node.js.'}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"C\xe1c b\u01b0\u1edbc th\u1ef1c hi\u1ec7n:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Build image:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker build -t my-node-app .\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Ch\u1ea1y container:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker run -it --name my_node_app -p 3000:3000 my-node-app\n"})}),"\n",(0,i.jsx)(e.p,{children:"-it: T\u1ea1o m\u1ed9t container t\u01b0\u01a1ng t\xe1c v\xe0 g\u1eafn terminal.\n--name my_node_app: \u0110\u1eb7t t\xean cho container.\n-p 3000:3000: M\u1edf c\u1ed5ng 3000 c\u1ee7a container v\xe0 \xe1nh x\u1ea1 \u0111\u1ebfn c\u1ed5ng 3000 c\u1ee7a m\xe1y ch\u1ee7."}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Ki\u1ec3m tra container:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Xem chi ti\u1ebft container:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker inspect my_node_app\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"G\u1eafn terminal v\xe0o container:"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker attach my_node_app\n"})}),"\n",(0,i.jsx)(e.h2,{id:"docker-compose-v\u1edbi-\u1ee9ng-d\u1ee5ng-nodejs",children:"Docker Compose v\u1edbi \u1ee9ng d\u1ee5ng NodeJS"}),"\n",(0,i.jsx)(e.p,{children:"1/ L\u1ee3i \xedch c\u1ee7a s\u1eed d\u1ee5ng Docker Compose:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Qu\u1ea3n l\xfd nhi\u1ec1u container: \u0110\u1ecbnh ngh\u0129a v\xe0 qu\u1ea3n l\xfd nhi\u1ec1u container trong m\u1ed9t file c\u1ea5u h\xecnh duy nh\u1ea5t."}),"\n",(0,i.jsx)(e.li,{children:"D\u1ec5 d\xe0ng tri\u1ec3n khai: Kh\u1edfi \u0111\u1ed9ng, d\u1eebng v\xe0 kh\u1edfi \u0111\u1ed9ng l\u1ea1i to\xe0n b\u1ed9 \u1ee9ng d\u1ee5ng ch\u1ec9 v\u1edbi m\u1ed9t l\u1ec7nh."}),"\n",(0,i.jsx)(e.li,{children:"M\xf4i tr\u01b0\u1eddng ph\xe1t tri\u1ec3n nh\u1ea5t qu\xe1n: \u0110\u1ea3m b\u1ea3o r\u1eb1ng m\xf4i tr\u01b0\u1eddng ph\xe1t tri\u1ec3n c\u1ee7a b\u1ea1n gi\u1ed1ng h\u1ec7t v\u1edbi m\xf4i tr\u01b0\u1eddng s\u1ea3n xu\u1ea5t."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"2/ V\xed d\u1ee5 m\u1ed9t file docker-compose.yml \u0111\u01a1n gi\u1ea3n:"}),"\n",(0,i.jsx)(e.p,{children:"YAML"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'version: \'3.7\'\n\nservices:\n  app:\n    build: .\n    ports:\n      - "3000:3000"\n    depends_on:\n      - db\n  db:\n    image: mongo\n    ports:\n      - "27017:27017"\n\n'})}),"\n",(0,i.jsx)(e.p,{children:"Gi\u1ea3i th\xedch:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"version: Ch\u1ec9 \u0111\u1ecbnh phi\xean b\u1ea3n c\u1ee7a Docker Compose."}),"\n",(0,i.jsx)(e.li,{children:"services: \u0110\u1ecbnh ngh\u0129a c\xe1c d\u1ecbch v\u1ee5 (container) trong \u1ee9ng d\u1ee5ng."}),"\n",(0,i.jsx)(e.li,{children:"build: Ch\u1ec9 ra th\u01b0 m\u1ee5c ch\u1ee9a Dockerfile \u0111\u1ec3 x\xe2y d\u1ef1ng image."}),"\n",(0,i.jsx)(e.li,{children:"ports: M\u1edf c\xe1c c\u1ed5ng \u0111\u1ec3 truy c\u1eadp v\xe0o d\u1ecbch v\u1ee5."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"V\u1edbi c\u1ea5u h\xecnh n\xe0y, Docker Compose s\u1ebd x\xe2y d\u1ef1ng m\u1ed9t container cho \u1ee9ng d\u1ee5ng Node.js ch\u1ea1y \u1edf Port 3000 v\xe0 m\u1ed9t container cho c\u01a1 s\u1edf d\u1eef li\u1ec7u MongoDB ch\u1ea1y \u1edf port 27017."})]})}function a(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},8453:(n,e,c)=>{c.d(e,{R:()=>d,x:()=>t});var i=c(6540);const r={},s=i.createContext(r);function d(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);