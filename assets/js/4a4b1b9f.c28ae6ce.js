"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7028],{7534:(n,e,c)=>{c.r(e),c.d(e,{assets:()=>h,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=c(4848),i=c(8453);const r={sidebar_position:3,title:"Docker Compose"},t="Docker Compose",s={id:"docker/docker-compose",title:"Docker Compose",description:"T\xe0i li\u1ec7u Docker Compose c\xf3 \u0111\u1ec1 c\u1eadp r\u1eb1ng",source:"@site/docs/docker/docker-compose.md",sourceDirName:"docker",slug:"/docker/docker-compose",permalink:"/engineering-wiki/docs/docker/docker-compose",draft:!1,unlisted:!1,editUrl:"https://github.com/AvengersCodeLovers/engineering-wiki/tree/main/docs/docker/docker-compose.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Docker Compose"},sidebar:"docsSidebar",previous:{title:"Dockerfile",permalink:"/engineering-wiki/docs/docker/docker-file"}},h={},d=[{value:"Kh\xf4ng l\u01b0u tr\u1eef c\xe1c kho\xe1 b\xed m\u1eadt b\xean trong <strong>Docker Compose</strong> (ho\u1eb7c repository t\u01b0\u01a1ng \u1ee9ng)",id:"kh\xf4ng-l\u01b0u-tr\u1eef-c\xe1c-kho\xe1-b\xed-m\u1eadt-b\xean-trong-docker-compose-ho\u1eb7c-repository-t\u01b0\u01a1ng-\u1ee9ng",level:2},{value:"Container-Compositions are <strong>Microservices</strong>",id:"container-compositions-are-microservices",level:2},{value:"C\xe1c container th\xe0nh ph\u1ea7n \u0111\u01b0\u1ee3c xem nh\u01b0 l\xe0 nh\u1eefng <strong>Microservices</strong>",id:"c\xe1c-container-th\xe0nh-ph\u1ea7n-\u0111\u01b0\u1ee3c-xem-nh\u01b0-l\xe0-nh\u1eefng-microservices",level:2},{value:"Use Environment Variables",id:"use-environment-variables",level:2},{value:"S\u1eed d\u1ee5ng  Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng",id:"s\u1eed-d\u1ee5ng--bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng",level:2}];function l(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,o.jsxs)(e.p,{children:["T\xe0i li\u1ec7u ",(0,o.jsx)(e.a,{href:"https://docs.docker.com/compose/overview/",children:"Docker Compose"})," c\xf3 \u0111\u1ec1 c\u1eadp r\u1eb1ng"]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Compose is a tool for defining and running multi-container Docker applications."}),"\n"]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Compose l\xe0 m\u1ed9t c\xf4ng c\u1ee5 \u0111\u1ec3 \u0111\u1ecbnh ngh\u0129a v\xe0 ch\u1ea1y c\xe1c \u1ee9ng d\u1ee5ng Docker \u0111a-container."}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"Th\u1ef1c t\u1ebf l\xe0 ch\xfang ta c\xf3 th\u1ec3 l\xe0m nhi\u1ec1u h\u01a1n th\u1ebf, t\xe0i li\u1ec7u n\xe0y s\u1ebd \u0111\u01b0a ra m\u1ed9t s\u1ed1 l\u01b0u \xfd khi s\u1eed d\u1ee5ng Docker Compose."}),"\n",(0,o.jsxs)(e.h2,{id:"kh\xf4ng-l\u01b0u-tr\u1eef-c\xe1c-kho\xe1-b\xed-m\u1eadt-b\xean-trong-docker-compose-ho\u1eb7c-repository-t\u01b0\u01a1ng-\u1ee9ng",children:["Kh\xf4ng l\u01b0u tr\u1eef c\xe1c kho\xe1 b\xed m\u1eadt b\xean trong ",(0,o.jsx)(e.strong,{children:"Docker Compose"})," (ho\u1eb7c repository t\u01b0\u01a1ng \u1ee9ng)"]}),"\n",(0,o.jsxs)(e.p,{children:["T\u01b0\u01a1ng t\u1ef1 nh\u01b0 vi\u1ec7c ",(0,o.jsx)(e.a,{href:"/engineering-wiki/docs/docker/docker-file#kh%C3%B4ng-%C4%91%C6%B0%E1%BB%A3c-ph%C3%A9p-ch%E1%BB%A9a-th%C3%B4ng-tin-b%C3%AD-m%E1%BA%ADt-trong-dockerfile-ho%E1%BA%B7c-repository-t%C6%B0%C6%A1ng-%E1%BB%A9ng",children:"Kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p ch\u1ee9a th\xf4ng tin b\xed m\u1eadt trong Dockerfile (ho\u1eb7c repository t\u01b0\u01a1ng \u1ee9ng)"}),", kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p l\u01b0u c\xe1c kho\xe1 b\xed m\u1eadt b\xean trong ",(0,o.jsx)(e.strong,{children:"Docker Compose"}),"."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'$ cat docker-compose.yml\n  mysql:\n    image: mysql\n    container_name: mysql\n    volumes:\n    - "./data/mysql:/var/lib/mysql"\n    environment:\n    - "MYSQL_ROOT_PASSWORD=root"\n    - "MYSQL_DATABASE=saml"\n    - "MYSQL_USER=saml"\n    - "MYSQL_PASSWORD=saml"\n'})}),"\n",(0,o.jsxs)(e.p,{children:["C\u1ea3i thi\u1ec7n \u0111\u1ea7u ti\xean l\xe0 s\u1eed d\u1ee5ng m\u1ed9t t\u1ec7p tin \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef b\xean ngo\xe0i ",(0,o.jsx)(e.strong,{children:"Dockerfile's"})," ho\u1eb7c ",(0,o.jsx)(e.strong,{children:"Docker Compose's"})," v\xe0 ch\u1ec9 \u0111\u01b0\u1ee3c l\u1ea5y ho\u1eb7c t\u1ea1o ra khi deploy."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'$ cat docker-compose.yml\n  mysql:\n    image: mysql\n    container_name: mysql\n    volumes:\n    - "./data/mysql:/var/lib/mysql"\n$ cat .env\nMYSQL_ROOT_PASSWORD=root\nMYSQL_DATABASE=saml\nMYSQL_USER=saml\nMYSQL_PASSWORD=saml\n'})}),"\n",(0,o.jsxs)(e.p,{children:["T\u1eeb ",(0,o.jsx)(e.strong,{children:"Docker Compose"})," 0.6, c\xf3 th\u1ec3 s\u1eed d\u1ee5ng ",(0,o.jsx)(e.a,{href:"https://docs.docker.com/compose/compose-file/#variable-substitution",children:"variable expansion"})," \u0111\u1ec3 th\u1ef1c hi\u1ec7n \u0111i\u1ec1u n\xe0y."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'$ cat docker-compose.yml\n  mysql:\n    image: mysql\n    container_name: mysql\n    volumes:\n    - "./data/mysql:/var/lib/mysql"\n    environment:\n    - "MYSQL_ROOT_PASSWORD=$(ADMPWD)"\n    - "MYSQL_DATABASE=$(DB)"\n    - "MYSQL_USER=$(DBU)"\n    - "MYSQL_PASSWORD=$(DBUPWD)"\n$ ADMPWD=root DB=saml DBU=saml DBUPWD=saml docker-compose up -d\n'})}),"\n",(0,o.jsx)(e.p,{children:'C\xe2u l\u1ec7nh n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c t\u1ea1o ra v\xe0 th\u1ef1c thi b\u1edfi c\xe1c c\xf4ng c\u1ee5 deploy m\xe0 kh\xf4ng \u0111\u1ec3 l\u1ed9 c\xe1c tham s\u1ed1 d\u01b0\u1edbi d\u1ea1ng "plain text".'}),"\n",(0,o.jsxs)(e.h2,{id:"container-compositions-are-microservices",children:["Container-Compositions are ",(0,o.jsx)(e.strong,{children:"Microservices"})]}),"\n",(0,o.jsxs)(e.h2,{id:"c\xe1c-container-th\xe0nh-ph\u1ea7n-\u0111\u01b0\u1ee3c-xem-nh\u01b0-l\xe0-nh\u1eefng-microservices",children:["C\xe1c container th\xe0nh ph\u1ea7n \u0111\u01b0\u1ee3c xem nh\u01b0 l\xe0 nh\u1eefng ",(0,o.jsx)(e.strong,{children:"Microservices"})]}),"\n",(0,o.jsx)(e.p,{children:"M\u1ed9t container th\xe0nh ph\u1ea7n c\xf3 th\u1ec3 ho\u1eb7c n\xean \u0111\u01b0\u1ee3c xem nh\u01b0 l\xe0 m\u1ed9t microservice.\nKhi container kh\u1edfi ch\u1ea1y, n\xf3 n\xean ho\u1ea1t \u0111\u1ed9ng th\xe0nh c\xf4ng v\xe0 cung c\u1ea5p m\u1ed9t service t\u01b0\u01a1ng \u1ee9ng."}),"\n",(0,o.jsx)(e.h2,{id:"use-environment-variables",children:"Use Environment Variables"}),"\n",(0,o.jsx)(e.h2,{id:"s\u1eed-d\u1ee5ng--bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng",children:"S\u1eed d\u1ee5ng  Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng"}),"\n",(0,o.jsx)(e.p,{children:'\u1ede c\xe1c phi\xean b\u1ea3n 1.5 tr\u1edf v\u1ec1 tr\u01b0\u1edbc, m\u1ed9t t\u1ec7p tin docker-compose ch\u1ec9 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng m\u1ed9t c\xe1ch c\u1ed1 \u0111\u1ecbnh v\xe0 c\u1ea7n ph\u1ea3i x\u1eed l\xfd th\xf4ng tin c\u1ee5 th\u1ec3 v\u1ec1 m\xf4i tr\u01b0\u1eddng "th\u1ee7 c\xf4ng" b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng c\xe1c b\u1ea3n sao c\u1ee7a t\u1ec7p compose ho\u1eb7c b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng c\xe1c th\u01b0 m\u1ee5c kh\xe1c nhau v\u1edbi c\xe1c t\u1ec7p env c\u1ee5 th\u1ec3.\nV\xed d\u1ee5:'}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"docker-compose-dev.yml"}),"\n",(0,o.jsx)(e.li,{children:"docker-compose-production.yml"}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:["K\u1ec3 t\u1eeb phi\xean b\u1ea3n 1.5, c\xf3 th\u1ec3 s\u1eed d\u1ee5ng ",(0,o.jsx)(e.strong,{children:"bi\u1ebfn m\xf4i tr\u01b0\u1eddng"}),' \u0111\u1ec3 t\u1ed5 ch\u1ee9c c\xe1c c\xe0i \u0111\u1eb7t c\u1ee5 th\u1ec3 v\u1ec1 m\xf4i tr\u01b0\u1eddng m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng h\u01a1n.\nD\u01b0\u1edbi \u0111\xe2y l\xe0 m\u1ed9t v\xed d\u1ee5 cho th\u1ea5y c\xe1ch s\u1eed d\u1ee5ng bi\u1ebfn m\xf4i tr\u01b0\u1eddng "ENV" \u0111\u1ec3 ch\u1ecdn m\u1ed9t "env_file" c\u1ee5 th\u1ec3.']}),"\n",(0,o.jsx)(e.p,{children:"docker-compose file:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'$ cat docker-compose.yml\nversion: "2"\nservices:\n  dummy:\n    env_file: ${ENV}\n    image: ubuntu\n    command: /bin/sh -c "echo $${ME}"\n'})}),"\n",(0,o.jsx)(e.p,{children:"V\u1edbi 2 t\u1ec7p env_file:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"$ cat .env1\nME=me\n\n$cat .env2\nME=I\n"})}),"\n",(0,o.jsx)(e.p,{children:'Ki\u1ec3m tra xem bi\u1ebfn m\xf4i tr\u01b0\u1eddng "ENV" \u0111\xe3 l\xe0m thay \u0111\u1ed5i c\xe0i \u0111\u1eb7t env_file trong docker-compose.yml nh\u01b0 sau:'}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"$ ENV=.env1 docker-compose up dummy\nRecreating identityandservices_dummy_1\nAttaching to identityandservices_dummy_1\ndummy_1 | me\nidentityandservices_dummy_1 exited with code 0\n\n$ ENV=.env2 docker-compose up dummy\nRecreating identityandservices_dummy_1\nAttaching to identityandservices_dummy_1\ndummy_1 | I\nidentityandservices_dummy_1 exited with code 0\n"})})]})}function m(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},8453:(n,e,c)=>{c.d(e,{R:()=>t,x:()=>s});var o=c(6540);const i={},r=o.createContext(i);function t(n){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);