"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5244],{3841:(n,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>o});var e=i(4848),h=i(8453);const c={sidebar_position:3},s="Vi\u1ebft script test v\u1edbi c\xf4ng c\u1ee5 K6 \u1edf c\xe1c Case Study th\u1ef1c t\u1ebf",r={id:"performance_testing/write_performance_script_with_k6",title:"Vi\u1ebft script test v\u1edbi c\xf4ng c\u1ee5 K6 \u1edf c\xe1c Case Study th\u1ef1c t\u1ebf",description:"Gi\u1edbi Thi\u1ec7u Chung",source:"@site/docs/performance_testing/write_performance_script_with_k6.md",sourceDirName:"performance_testing",slug:"/performance_testing/write_performance_script_with_k6",permalink:"/engineering-wiki/docs/performance_testing/write_performance_script_with_k6",draft:!1,unlisted:!1,editUrl:"https://github.com/AvengersCodeLovers/engineering-wiki/tree/main/docs/performance_testing/write_performance_script_with_k6.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"C\xe1c nguy\xean t\u1eafc c\u01a1 b\u1ea3n trong ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t",permalink:"/engineering-wiki/docs/performance_testing/basic_principles_in_performance_testing"},next:{title:"Docker",permalink:"/engineering-wiki/docs/category/docker"}},l={},o=[{value:"Gi\u1edbi Thi\u1ec7u Chung",id:"gi\u1edbi-thi\u1ec7u-chung",level:2},{value:"K6 La\u0300 gi\u0300 va\u0300 la\u0300m gi\u0300 ?",id:"k6-la\u0300-gi\u0300-va\u0300-la\u0300m-gi\u0300-",level:3},{value:"M\xf4\u0301i quan h\xea\u0323 gi\u01b0\u0303a Sun * Atlas va\u0300 K6",id:"m\xf4\u0301i-quan-h\xea\u0323-gi\u01b0\u0303a-sun--atlas-va\u0300-k6",level:3},{value:"C\u1ea5u H\xecnh Ch\u1ea1y K6",id:"c\u1ea5u-h\xecnh-ch\u1ea1y-k6",level:2},{value:"Y\xeau c\xe2\u0300u v\xea\u0300 ph\xe2\u0300n c\u01b0\u0301ng",id:"y\xeau-c\xe2\u0300u-v\xea\u0300-ph\xe2\u0300n-c\u01b0\u0301ng",level:3},{value:"OS fine-tuning",id:"os-fine-tuning",level:4},{value:"Network",id:"network",level:4},{value:"CPU",id:"cpu",level:4},{value:"Ca\u0300i \u0111\u0103\u0323t K6",id:"ca\u0300i-\u0111\u0103\u0323t-k6",level:3},{value:"Linux",id:"linux",level:4},{value:"MacOS",id:"macos",level:4},{value:"Windows",id:"windows",level:4},{value:"Ca\u0301c c\xe2u l\xea\u0323nh chi\u0301nh trong K6",id:"ca\u0301c-c\xe2u-l\xea\u0323nh-chi\u0301nh-trong-k6",level:2},{value:"C\u1ea5u Tr\xfac C\u01a1 B\u1ea3n C\u1ee7a Script K6",id:"c\u1ea5u-tr\xfac-c\u01a1-b\u1ea3n-c\u1ee7a-script-k6",level:3},{value:"Setup and teardown stages",id:"setup-and-teardown-stages",level:3},{value:"Modules",id:"modules",level:3},{value:"Built-in modules",id:"built-in-modules",level:4},{value:"Local filesystem modules",id:"local-filesystem-modules",level:4},{value:"Remote HTTP(S) modules",id:"remote-https-modules",level:4},{value:"Metrics",id:"metrics",level:3},{value:"Checks",id:"checks",level:3},{value:"Check for HTTP response code",id:"check-for-http-response-code",level:4},{value:"Check for text in response body",id:"check-for-text-in-response-body",level:4},{value:"Theo do\u0303i ti\u0309 l\xea\u0323 check passed \u01a1\u0309 output",id:"theo-do\u0303i-ti\u0309-l\xea\u0323-check-passed-\u01a1\u0309-output",level:4},{value:"Ng\u01b0\u1ee1ng (Thresholds)",id:"ng\u01b0\u1ee1ng-thresholds",level:3},{value:"Vi\u0301 du\u0323 threshold cho http error va\u0300 response time",id:"vi\u0301-du\u0323-threshold-cho-http-error-va\u0300-response-time",level:4},{value:"Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng (Environment Variables)",id:"bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng-environment-variables",level:2},{value:"Truy\u1ec1n Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng v\xe0o Script k6",id:"truy\u1ec1n-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng-v\xe0o-script-k6",level:3},{value:"C\u1ea5u H\xecnh Options k6 B\u1eb1ng Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng",id:"c\u1ea5u-h\xecnh-options-k6-b\u1eb1ng-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng",level:3},{value:"L\u01b0u y\u0301 gi\u01b0\u0303a Atlas va\u0300 K6 ENV",id:"l\u01b0u-y\u0301-gi\u01b0\u0303a-atlas-va\u0300-k6-env",level:3},{value:"V\xed D\u1ee5: K\u1ecbch B\u1ea3n Ki\u1ec3m Th\u1eed \u0110\u0103ng Nh\u1eadp V\xe0 L\u1ea5y Th\xf4ng Tin Ng\u01b0\u1eddi D\xf9ng",id:"v\xed-d\u1ee5-k\u1ecbch-b\u1ea3n-ki\u1ec3m-th\u1eed-\u0111\u0103ng-nh\u1eadp-v\xe0-l\u1ea5y-th\xf4ng-tin-ng\u01b0\u1eddi-d\xf9ng",level:2},{value:"C\u1ea5u H\xecnh K\u1ecbch B\u1ea3n",id:"c\u1ea5u-h\xecnh-k\u1ecbch-b\u1ea3n",level:3},{value:"Ph\u1ea7n Setup: Chu\u1ea9n B\u1ecb T\xe0i Kho\u1ea3n \u0110\u0103ng Nh\u1eadp",id:"ph\u1ea7n-setup-chu\u1ea9n-b\u1ecb-t\xe0i-kho\u1ea3n-\u0111\u0103ng-nh\u1eadp",level:3},{value:"Ph\u1ea7n Th\u1ef1c Thi: \u0110\u0103ng Nh\u1eadp V\xe0 L\u1ea5y Th\xf4ng Tin Ng\u01b0\u1eddi D\xf9ng",id:"ph\u1ea7n-th\u1ef1c-thi-\u0111\u0103ng-nh\u1eadp-v\xe0-l\u1ea5y-th\xf4ng-tin-ng\u01b0\u1eddi-d\xf9ng",level:3}];function a(n){const t={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,h.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.h1,{id:"vi\u1ebft-script-test-v\u1edbi-c\xf4ng-c\u1ee5-k6-\u1edf-c\xe1c-case-study-th\u1ef1c-t\u1ebf",children:"Vi\u1ebft script test v\u1edbi c\xf4ng c\u1ee5 K6 \u1edf c\xe1c Case Study th\u1ef1c t\u1ebf"}),"\n",(0,e.jsx)(t.h2,{id:"gi\u1edbi-thi\u1ec7u-chung",children:"Gi\u1edbi Thi\u1ec7u Chung"}),"\n",(0,e.jsx)("center",{children:(0,e.jsx)(t.img,{src:"https://gist.github.com/user-attachments/assets/304ff367-d9c5-43ba-954f-31c3e34c21d9",alt:"image"})}),"\n",(0,e.jsx)(t.h3,{id:"k6-la\u0300-gi\u0300-va\u0300-la\u0300m-gi\u0300-",children:"K6 La\u0300 gi\u0300 va\u0300 la\u0300m gi\u0300 ?"}),"\n",(0,e.jsx)(t.p,{children:"S\u1eed d\u1ee5ng k6, b\u1ea1n c\xf3 th\u1ec3 ki\u1ec3m tra \u0111\u1ed9 tin c\u1eady v\xe0 hi\u1ec7u su\u1ea5t c\u1ee7a \u1ee9ng d\u1ee5ng c\u0169ng nh\u01b0 c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng c\u1ee7a m\xecnh."}),"\n",(0,e.jsx)(t.p,{children:"k6 gi\xfap c\xe1c \u0111\u1ed9i ng\u0169 k\u1ef9 thu\u1eadt ng\u0103n ng\u1eeba l\u1ed7i v\xe0 vi ph\u1ea1m SLO, cho ph\xe9p h\u1ecd x\xe2y d\u1ef1ng c\xe1c \u1ee9ng d\u1ee5ng c\xf3 kh\u1ea3 n\u0103ng ch\u1ed1ng ch\u1ecbu t\u1ed1t v\xe0 hi\u1ec7u su\u1ea5t cao khi m\u1edf r\u1ed9ng."}),"\n",(0,e.jsx)(t.p,{children:"C\xe1c \u0111\u1ed9i ng\u0169 k\u1ef9 thu\u1eadt, bao g\u1ed3m nh\xe0 ph\xe1t tri\u1ec3n (Developers), k\u1ef9 s\u01b0 ki\u1ec3m th\u1eed (QA Engineers), SDET (Software Development Engineers in Test), v\xe0 SRE (Site Reliability Engineers), th\u01b0\u1eddng s\u1eed d\u1ee5ng k6 cho c\xe1c m\u1ee5c \u0111\xedch sau:"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"Ki\u1ec3m th\u1eed t\u1ea3i v\xe0 hi\u1ec7u su\u1ea5t:"}),(0,e.jsx)(t.br,{}),"\n","k6 \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u h\xf3a cho vi\u1ec7c ti\xeau th\u1ee5 t\xe0i nguy\xean \u1edf m\u1ee9c t\u1ed1i thi\u1ec3u v\xe0 \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 ch\u1ea1y c\xe1c b\xe0i ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t cao nh\u01b0 ki\u1ec3m th\u1eed \u0111\u1ed9t bi\u1ebfn, ki\u1ec3m th\u1eed c\u0103ng th\u1eb3ng, ho\u1eb7c ki\u1ec3m th\u1eed k\xe9o d\xe0i."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"Ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t tr\xecnh duy\u1ec7t:"}),(0,e.jsx)(t.br,{}),"\n","Th\xf4ng qua API tr\xecnh duy\u1ec7t c\u1ee7a k6, b\u1ea1n c\xf3 th\u1ec3 ch\u1ea1y c\xe1c b\xe0i ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t d\u1ef1a tr\xean tr\xecnh duy\u1ec7t v\xe0 thu th\u1eadp c\xe1c s\u1ed1 li\u1ec7u li\xean quan \u0111\u1ec3 x\xe1c \u0111\u1ecbnh c\xe1c v\u1ea5n \u0111\u1ec1 v\u1ec1 hi\u1ec7u su\u1ea5t li\xean quan \u0111\u1ebfn tr\xecnh duy\u1ec7t. B\u1ea1n c\u0169ng c\xf3 th\u1ec3 k\u1ebft h\u1ee3p c\xe1c b\xe0i ki\u1ec3m th\u1eed tr\xecnh duy\u1ec7t v\u1edbi c\xe1c ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t kh\xe1c \u0111\u1ec3 c\xf3 c\xe1i nh\xecn to\xe0n di\u1ec7n v\u1ec1 hi\u1ec7u su\u1ea5t c\u1ee7a trang web."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"Gi\xe1m s\xe1t hi\u1ec7u su\u1ea5t v\xe0 gi\xe1m s\xe1t t\u1ed5ng h\u1ee3p:"}),(0,e.jsx)(t.br,{}),"\n","B\u1ea1n c\xf3 th\u1ec3 l\xean l\u1ecbch \u0111\u1ec3 ch\u1ea1y c\xe1c b\xe0i ki\u1ec3m th\u1eed v\u1edbi t\u1ea3i t\u1ed1i thi\u1ec3u m\u1ed9t c\xe1ch th\u01b0\u1eddng xuy\xean, li\xean t\u1ee5c x\xe1c th\u1ef1c hi\u1ec7u su\u1ea5t v\xe0 kh\u1ea3 n\u0103ng s\u1eb5n s\xe0ng c\u1ee7a m\xf4i tr\u01b0\u1eddng s\u1ea3n xu\u1ea5t. \u0110\u1ec3 l\xe0m \u0111i\u1ec1u n\xe0y, b\u1ea1n c\u0169ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng Grafana Cloud Synthetic Monitoring, h\u1ed7 tr\u1ee3 vi\u1ec7c ch\u1ea1y c\xe1c script k6."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"T\u1ef1 \u0111\u1ed9ng h\xf3a ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t:"}),(0,e.jsx)(t.br,{}),"\n","k6 t\xedch h\u1ee3p li\u1ec1n m\u1ea1ch v\u1edbi c\xe1c c\xf4ng c\u1ee5 CI/CD v\xe0 t\u1ef1 \u0111\u1ed9ng h\xf3a, cho ph\xe9p c\xe1c \u0111\u1ed9i ng\u0169 k\u1ef9 thu\u1eadt t\u1ef1 \u0111\u1ed9ng h\xf3a ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t nh\u01b0 m\u1ed9t ph\u1ea7n c\u1ee7a chu k\u1ef3 ph\xe1t tri\u1ec3n v\xe0 ph\xe1t h\xe0nh."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"Ki\u1ec3m th\u1eed h\u1ed7n lo\u1ea1n v\xe0 kh\u1ea3 n\u0103ng ch\u1ecbu l\u1ed7i:"}),(0,e.jsx)(t.br,{}),"\n","B\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng k6 \u0111\u1ec3 m\xf4 ph\u1ecfng l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp nh\u01b0 m\u1ed9t ph\u1ea7n c\u1ee7a c\xe1c th\u1eed nghi\u1ec7m h\u1ed7n lo\u1ea1n, k\xedch ho\u1ea1t ch\xfang t\u1eeb c\xe1c b\xe0i ki\u1ec3m th\u1eed k6 ho\u1eb7c ch\xe8n c\xe1c lo\u1ea1i l\u1ed7i kh\xe1c nhau v\xe0o Kubernetes v\u1edbi xk6-disruptor."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"Ki\u1ec3m th\u1eed c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng:"}),(0,e.jsx)(t.br,{}),"\n","V\u1edbi c\xe1c ph\u1ea7n m\u1edf r\u1ed9ng c\u1ee7a k6, b\u1ea1n c\xf3 th\u1ec3 th\xeam h\u1ed7 tr\u1ee3 cho k6 \u0111\u1ed1i v\u1edbi c\xe1c giao th\u1ee9c m\u1edbi ho\u1eb7c s\u1eed d\u1ee5ng m\u1ed9t client c\u1ee5 th\u1ec3 \u0111\u1ec3 ki\u1ec3m th\u1eed tr\u1ef1c ti\u1ebfp c\xe1c h\u1ec7 th\u1ed1ng ri\xeang l\u1ebb trong c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng c\u1ee7a m\xecnh."]}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(t.h3,{id:"m\xf4\u0301i-quan-h\xea\u0323-gi\u01b0\u0303a-sun--atlas-va\u0300-k6",children:"M\xf4\u0301i quan h\xea\u0323 gi\u01b0\u0303a Sun * Atlas va\u0300 K6"}),"\n",(0,e.jsxs)(t.p,{children:["Nh\u01b0 \u0111\u01b0\u01a1\u0323c m\xf4 ta\u0309 \u01a1\u0309 ",(0,e.jsx)(t.a,{href:"https://docs.google.com/document/d/1Tua943igvVk-DwnVshRRafWiCXSzR0v9NYQKky8TjNY/edit",children:"Guideline Atlas"})]}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsxs)(t.li,{children:["Atlas l\xe0 m\u1ed9t h\u1ec7 th\u1ed1ng cho ph\xe9p ng\u01b0\u1eddi d\xf9ng ti\u1ebfn h\xe0nh ki\u1ec3m tra hi\u1ec7u su\u1ea5t cho c\xe1c h\u1ec7 th\u1ed1ng/d\u1ecbch v\u1ee5 b\u1eb1ng c\xe1ch t\u1ea1o c\xe1c k\u1ecbch b\u1ea3n ki\u1ec3m tra linh ho\u1ea1t th\xf4ng qua ",(0,e.jsx)(t.strong,{children:"giao di\u1ec7n ng\u01b0\u1eddi d\xf9ng tr\u1ef1c quan"}),"."]}),"\n",(0,e.jsxs)(t.li,{children:["Atlas s\u1eed d\u1ee5ng OSS \u0111\u01b0\u1ee3c g\u1ecdi l\xe0 ",(0,e.jsx)(t.strong,{children:"K6"})," trong n\u1ec1n \u0111\u1ec3 th\u1ef1c hi\u1ec7n ki\u1ec3m tra. B\u1ea1n c\xf3 th\u1ec3 xem t\xe0i li\u1ec7u K6 \u0111\u1ec3 bi\u1ebft th\xeam th\xf4ng tin v\u1ec1 b\xe0i ki\u1ec3m tra t\u1eadp l\u1ec7nh."]}),"\n"]}),"\n",(0,e.jsx)(t.p,{children:"V\xea\u0300 ba\u0309n ch\xe2\u0301t Atlas se\u0303 \u0111o\u0301ng vai tro\u0300 giao di\xea\u0323n ng\u01b0\u01a1\u0300i du\u0300ng ti\xea\u0323n l\u01a1\u0323i cho \u0111\xf4\u0323i ngu\u0303 non-tech s\u01b0\u0309 du\u0323ng, phi\u0301a sau \u0111o\u0301 v\xea\u0300 ph\xe2\u0300n l\xean ki\u0323ch ba\u0309n cu\u0303ng nh\u01b0 ti\xea\u0301n ha\u0300nh cha\u0323y th\u01b0\u0309 nghi\xea\u0323m thi\u0300 Atlas \u0111ang s\u01b0\u0309 du\u0323ng OpenSource la\u0300 K6, v\xea\u0300 guideline s\u01b0\u0309 du\u0323ng Atlas \u01a1\u0309 tr\xean cu\u0303ng \u0111a\u0303 \u0111\xea\u0300 c\xe2\u0323p t\u01a1\u0301i n\xean pha\u0323m vi cu\u0309a chu\u0309 \u0111\xea\u0300 na\u0300y mi\u0300nh se\u0303 \u0111i va\u0300o vi\xea\u0323c l\xean ki\u0323ch ba\u0309n b\u0103\u0300ng k6 cu\u0303ng se\u0303 ph\xe2\u0300n na\u0300o \u0111a\u0301p \u01b0\u0301ng \u0111\u01b0\u01a1\u0323c vi\xea\u0323c s\u01b0\u0309 du\u0323ng Atlas vi\u0300 Atlas co\u0301 support Script Editor"}),"\n",(0,e.jsx)(t.h2,{id:"c\u1ea5u-h\xecnh-ch\u1ea1y-k6",children:"C\u1ea5u H\xecnh Ch\u1ea1y K6"}),"\n",(0,e.jsx)(t.h3,{id:"y\xeau-c\xe2\u0300u-v\xea\u0300-ph\xe2\u0300n-c\u01b0\u0301ng",children:"Y\xeau c\xe2\u0300u v\xea\u0300 ph\xe2\u0300n c\u01b0\u0301ng"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"K6 c\xf3 th\u1ec3 t\u1ea1o ra r\u1ea5t nhi\u1ec1u t\u1ea3i t\u1eeb m\u1ed9t m\xe1y duy nh\u1ea5t. V\u1edbi gi\xe1m s\xe1t v\xe0 t\u1ed1i \u01b0u h\xf3a t\u1eadp l\u1ec7nh ph\xf9 h\u1ee3p, b\u1ea1n c\xf3 th\u1ec3 ch\u1ea1y m\u1ed9t b\xe0i ki\u1ec3m tra t\u1ea3i kh\xe1 l\u1edbn m\xe0 kh\xf4ng c\u1ea7n th\u1ef1c thi ph\xe2n t\xe1n"}),"\n",(0,e.jsxs)(t.li,{children:["T\u1ed1i \u0111a h\xf3a t\u1ea3i tr\u1ecdng m\xe0 m\xe1y t\u1ea1o ra l\xe0 m\u1ed9t qu\xe1 tr\xecnh \u0111a chi\u1ec1u, bao g\u1ed3m:","\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"Thay \u0111\u1ed5i c\xe0i \u0111\u1eb7t h\u1ec7 \u0111i\u1ec1u h\xe0nh \u0111\u1ec3 t\u0103ng gi\u1edbi h\u1ea1n m\u1ea1ng v\xe0 ng\u01b0\u1eddi d\xf9ng m\u1eb7c \u0111\u1ecbnh."}),"\n",(0,e.jsx)(t.li,{children:"Theo d\xf5i ta\u0300i nguy\xean cu\u0309a ma\u0301y cha\u0323y test \u0111\xea\u0309 \u0111a\u0309m ba\u0309o \u0111u\u0309 ta\u0309i."}),"\n",(0,e.jsx)(t.li,{children:"Thi\u1ebft k\u1ebf c\xe1c b\xe0i ki\u1ec3m tra hi\u1ec7u qu\u1ea3, ch\xfa \xfd \u0111\u1ebfn k\u1ecbch b\u1ea3n, t\xf9y ch\u1ecdn k6 v\xe0 ca\u0301c file uploads n\xea\u0301u co\u0301."}),"\n",(0,e.jsx)(t.li,{children:"Theo d\xf5i qu\xe1 tr\xecnh ch\u1ea1y th\u1eed \u0111\u1ec3 ph\xe1t hi\u1ec7n l\u1ed7i \u0111\u01b0\u1ee3c k6 ghi l\u1ea1i, l\u1ed7i n\xe0y c\xf3 th\u1ec3 ch\u1ec9 ra nh\u1eefng h\u1ea1n ch\u1ebf c\u1ee7a ma\u0301y cha\u0323y test ho\u1eb7c h\u1ec7 th\u1ed1ng \u0111ang \u0111\u01b0\u01a1\u0323c test (SystemUnderTest)."}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(t.li,{children:"M\u1ed9t phi\xean b\u1ea3n k6 \u0111\u01a1n l\u1ebb c\xf3 th\u1ec3 ch\u1ea1y 30.000-40.000 ng\u01b0\u1eddi d\xf9ng \u0111\u1ed3ng th\u1eddi (VU). Trong m\u1ed9t s\u1ed1 tr\u01b0\u1eddng h\u1ee3p, s\u1ed1 l\u01b0\u1ee3ng VU n\xe0y c\xf3 th\u1ec3 t\u1ea1o ra t\u1edbi 300.000 y\xeau c\u1ea7u HTTP m\u1ed7i gi\xe2y (RPS). M\xf4\u0323t process K6 co\u0301 th\xea\u0309 t\xe2\u0323n du\u0323ng t\xf4\u0301t t\xe2\u0301t ca\u0309 ca\u0301c CPU Core tr\xean instance"}),"\n"]}),"\n",(0,e.jsx)(t.h4,{id:"os-fine-tuning",children:"OS fine-tuning"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"C\xe1c h\u1ec7 \u0111i\u1ec1u h\xe0nh hi\u1ec7n \u0111\u1ea1i \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh v\u1edbi gi\u1edbi h\u1ea1n kh\xe1 th\u1ea5p v\u1ec1 s\u1ed1 l\u01b0\u1ee3ng k\u1ebft n\u1ed1i m\u1ea1ng \u0111\u1ed3ng th\u1eddi m\xe0 m\u1ed9t \u1ee9ng d\u1ee5ng c\xf3 th\u1ec3 t\u1ea1o. \u0110\xe2y l\xe0 m\u1eb7c \u0111\u1ecbnh an to\xe0n v\xec h\u1ea7u h\u1ebft c\xe1c ch\u01b0\u01a1ng tr\xecnh kh\xf4ng c\u1ea7n m\u1edf h\xe0ng ngh\xecn k\u1ebft n\u1ed1i TCP \u0111\u1ed3ng th\u1eddi nh\u01b0 k6. Tuy nhi\xean, n\u1ebfu ch\xfang ta mu\u1ed1n s\u1eed d\u1ee5ng to\xe0n b\u1ed9 dung l\u01b0\u1ee3ng m\u1ea1ng v\xe0 \u0111\u1ea1t hi\u1ec7u su\u1ea5t t\u1ed1i \u0111a, ch\xfang ta c\u1ea7n thay \u0111\u1ed5i m\u1ed9t s\u1ed1 c\xe0i \u0111\u1eb7t m\u1eb7c \u0111\u1ecbnh n\xe0y."}),"\n"]}),"\n",(0,e.jsxs)(t.p,{children:["Tr\xean h\xea\u0323 \u0111i\xea\u0300u ha\u0300nh GNU/Linux, h\xe3y ch\u1ea1y c\xe1c l\u1ec7nh sau v\u1edbi t\u01b0 c\xe1ch ",(0,e.jsx)(t.code,{children:"root"})," user:"]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:'sysctl -w net.ipv4.ip_local_port_range="1024 65535"\nsysctl -w net.ipv4.tcp_tw_reuse=1\nsysctl -w net.ipv4.tcp_timestamps=1\nulimit -n 250000\n'})}),"\n",(0,e.jsx)(t.p,{children:"C\xe1c l\u1ec7nh n\xe0y cho ph\xe9p t\xe1i s\u1eed d\u1ee5ng c\xe1c k\u1ebft n\u1ed1i m\u1ea1ng, t\u0103ng gi\u1edbi h\u1ea1n k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 ph\u1ea1m vi c\u1ee7a c\xe1c c\u1ed5ng c\u1ee5c b\u1ed9."}),"\n",(0,e.jsxs)(t.p,{children:["C\xe1c l\u1ec7nh ",(0,e.jsx)(t.code,{children:"sysctl"})," \xe1p d\u1ee5ng ngay l\u1eadp t\u1ee9c cho to\xe0n b\u1ed9 h\u1ec7 th\u1ed1ng v\xe0 s\u1ebd \u0111\u1eb7t l\u1ea1i v\u1ec1 gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh n\u1ebfu b\u1ea1n kh\u1edfi \u0111\u1ed9ng l\u1ea1i d\u1ecbch v\u1ee5 m\u1ea1ng ho\u1eb7c kh\u1edfi \u0111\u1ed9ng l\u1ea1i m\xe1y. L\u1ec7nh ",(0,e.jsx)(t.code,{children:"ulimit"})," ch\u1ec9 \xe1p d\u1ee5ng cho phi\xean shell hi\u1ec7n t\u1ea1i v\xe0 b\u1ea1n s\u1ebd c\u1ea7n ch\u1ea1y l\u1ea1i \u0111\u1ec3 l\u1ec7nh \u0111\u01b0\u1ee3c \u0111\u1eb7t trong m\u1ed9t phi\xean shell kh\xe1c."]}),"\n",(0,e.jsx)(t.h4,{id:"network",children:"Network"}),"\n",(0,e.jsx)(t.p,{children:"Th\xf4ng l\u01b0\u1ee3ng m\u1ea1ng c\u1ee7a m\xe1y l\xe0 m\u1ed9t c\xe2n nh\u1eafc quan tr\u1ecdng khi ch\u1ea1y c\xe1c th\u1eed nghi\u1ec7m l\u1edbn. Nhi\u1ec1u m\xe1y AWS EC2 c\xf3 k\u1ebft n\u1ed1i 1Gbit/gi\xe2y, \u0111i\u1ec1u n\xe0y c\xf3 th\u1ec3 h\u1ea1n ch\u1ebf t\u1ea3i m\xe0 k6 c\xf3 th\u1ec3 t\u1ea1o ra."}),"\n",(0,e.jsxs)(t.p,{children:["Khi ch\u1ea1y th\u1eed nghi\u1ec7m, h\xe3y s\u1eed d\u1ee5ng m\u1ed9t c\xf4ng c\u1ee5 nh\u01b0 ",(0,e.jsx)(t.code,{children:"iftop"})," trong terminal \u0111\u1ec3 xem l\u01b0\u1ee3ng l\u01b0u l\u01b0\u1ee3ng m\u1ea1ng \u0111\u01b0\u1ee3c t\u1ea1o ra theo th\u1eddi gian th\u1ef1c. N\u1ebfu l\u01b0u l\u01b0\u1ee3ng kh\xf4ng \u0111\u1ed5i \u1edf m\u1ee9c 1Gbit/gi\xe2y, th\u1eed nghi\u1ec7m c\u1ee7a b\u1ea1n c\xf3 th\u1ec3 b\u1ecb gi\u1edbi h\u1ea1n b\u1edfi card m\u1ea1ng."]}),"\n",(0,e.jsx)(t.h4,{id:"cpu",children:"CPU"}),"\n",(0,e.jsxs)(t.p,{children:["k6 c\xf3 kh\u1ea3 n\u0103ng \u0111a lu\u1ed3ng m\u1ea1nh m\u1ebd v\xe0 c\xf3 th\u1ec3 s\u1eed d\u1ee5ng hi\u1ec7u qu\u1ea3 t\u1ea5t c\u1ea3 c\xe1c l\xf5i CPU c\xf3 s\u1eb5n.\nTuy nhi\xean chu\u0301ng ta cu\u0303ng c\xe2\u0300n theo do\u0303i ta\u0300i nguy\xean cu\u0309a ma\u0301y cha\u0323y k6 cho ca\u0301c tr\u01b0\u01a1\u0300ng h\u01a1\u0323p ta\u0309i l\u01a1\u0301n, recommend \u01a1\u0309 \u0111\xe2y la\u0300 k6 chi\u0309 n\xean cha\u0323y t\xf4\u0301i \u0111a \u01a1\u0309 ",(0,e.jsx)(t.strong,{children:"ng\u01b0\u01a1\u0303ng 80% CPU va\u0300 20% CPU nha\u0300n r\xf4\u0303i"}),", tr\u01b0\u01a1\u0300ng h\u01a1\u0323p cha\u0323y t\u01a1\u0301i 100% CPU co\u0301 th\xea\u0309 a\u0309nh h\u01b0\u01a1\u0309ng t\u01a1\u0301i k\xea\u0301t qua\u0309 cu\u0309a performance"]}),"\n",(0,e.jsx)(t.h3,{id:"ca\u0300i-\u0111\u0103\u0323t-k6",children:"Ca\u0300i \u0111\u0103\u0323t K6"}),"\n",(0,e.jsxs)(t.p,{children:["K6 h\xf4\u0303 tr\u01a1\u0323 nhi\xea\u0300u h\xea\u0323 \u0111i\xea\u0300u ha\u0300nh kha\u0301c nhau co\u0301 th\xea\u0309 ca\u0300i \u0111\u0103\u0323t theo ca\u0301c h\u01b0\u01a1\u0301ng d\xe2\u0303n d\u01b0\u01a1\u0301i \u0111\xe2y\nho\u0103\u0323c tham kha\u0309o trang chu\u0309: ",(0,e.jsx)(t.a,{href:"https://k6.io/docs/get-started/installation/",children:"https://k6.io/docs/get-started/installation/"})]}),"\n",(0,e.jsx)(t.h4,{id:"linux",children:"Linux"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:'sudo gpg -k\nsudo gpg --no-default-keyring --keyring /usr/share/keyrings/k6-archive-keyring.gpg --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys C5AD17C747E3415A3642D57D77C6C491D6AC1D69\necho "deb [signed-by=/usr/share/keyrings/k6-archive-keyring.gpg] https://dl.k6.io/deb stable main" | sudo tee /etc/apt/sources.list.d/k6.list\nsudo apt-get update\nsudo apt-get install k6\n'})}),"\n",(0,e.jsx)(t.h4,{id:"macos",children:"MacOS"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"brew install k6\n"})}),"\n",(0,e.jsx)(t.h4,{id:"windows",children:"Windows"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"choco install k6\n"})}),"\n",(0,e.jsx)(t.p,{children:"or"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"winget install k6 --source winget\n"})}),"\n",(0,e.jsx)(t.h2,{id:"ca\u0301c-c\xe2u-l\xea\u0323nh-chi\u0301nh-trong-k6",children:"Ca\u0301c c\xe2u l\xea\u0323nh chi\u0301nh trong K6"}),"\n",(0,e.jsx)(t.h3,{id:"c\u1ea5u-tr\xfac-c\u01a1-b\u1ea3n-c\u1ee7a-script-k6",children:"C\u1ea5u Tr\xfac C\u01a1 B\u1ea3n C\u1ee7a Script K6"}),"\n",(0,e.jsx)(t.p,{children:"\u0110\xea\u0309 la\u0300m quen co\u0301 th\xea\u0309 cha\u0323y l\xea\u0323nh sau k6 se\u0303 generate ra 1 sample script"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"k6 new\n"})}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"import http from 'k6/http';\nimport { sleep } from 'k6';\n\nexport const options = {\n  // A number specifying the number of VUs to run concurrently.\n  vus: 10,\n  // A string specifying the total duration of the test run.\n  duration: '30s',\n  // Uncomment this section to enable the use of Browser API in your tests.\n  //\n  // See https://grafana.com/docs/k6/latest/using-k6-browser/running-browser-tests/ to learn more\n  // about using Browser API in your test scripts.\n  //\n  // scenarios: {\n  //   // The scenario name appears in the result summary, tags, and so on.\n  //   // You can give the scenario any name, as long as each name in the script is unique.\n  //   ui: {\n  //     // Executor is a mandatory parameter for browser-based tests.\n  //     // Shared iterations in this case tells k6 to reuse VUs to execute iterations.\n  //     //\n  //     // See https://grafana.com/docs/k6/latest/using-k6/scenarios/executors/ for other executor types.\n  //     executor: 'shared-iterations',\n  //     options: {\n  //       browser: {\n  //         // This is a mandatory parameter that instructs k6 to launch and\n  //         // connect to a chromium-based browser, and use it to run UI-based\n  //         // tests.\n  //         type: 'chromium',\n  //       },\n  //     },\n  //   },\n  // }\n};\n\n// The function that defines VU logic.\n//\n// See https://grafana.com/docs/k6/latest/examples/get-started-with-k6/ to learn more\n// about authoring k6 scripts.\n//\nexport default function() {\n  http.get('https://test.k6.io');\n  sleep(1);\n}\n"})}),"\n",(0,e.jsxs)(t.p,{children:["M\u1ed9t script K6 c\u01a1 b\u1ea3n th\u01b0\u1eddng \u0111\u01b0\u1ee3c chia th\xe0nh b\u1ed1n ph\u1ea7n ch\xednh: ",(0,e.jsx)(t.code,{children:"init code"}),", ",(0,e.jsx)(t.code,{children:"setup code"}),", ",(0,e.jsx)(t.code,{children:"VU code"}),", v\xe0 ",(0,e.jsx)(t.code,{children:"teardown code"}),". M\u1ed7i ph\u1ea7n c\xf3 m\u1ed9t vai tr\xf2 c\u1ee5 th\u1ec3 trong qu\xe1 tr\xecnh ch\u1ea1y ki\u1ec3m th\u1eed hi\u1ec7u su\u1ea5t."]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="The four lifecycle stages"',children:"// 1. init code\n\nexport function setup() {\n  // 2. setup code\n}\n\nexport default function (data) {\n  // 3. VU code\n}\n\nexport function teardown(data) {\n  // 4. teardown code\n}\n"})}),"\n",(0,e.jsxs)(t.table,{children:[(0,e.jsx)(t.thead,{children:(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.th,{children:"Test stage"}),(0,e.jsx)(t.th,{children:"Mu\u0323c \u0111i\u0301ch"}),(0,e.jsx)(t.th,{children:"Vi\u0301 du\u0323"}),(0,e.jsx)(t.th,{children:"Called"})]})}),(0,e.jsxs)(t.tbody,{children:[(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:"1. init"}),(0,e.jsx)(t.td,{children:"Load local files, import modules, declare lifecycle functions"}),(0,e.jsx)(t.td,{children:"Open JSON file, Import module"}),(0,e.jsx)(t.td,{children:"Once per VU*"})]}),(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:"2. Setup"}),(0,e.jsx)(t.td,{children:"Set up data for processing, share data among VUs"}),(0,e.jsx)(t.td,{children:"Call API to start test environment"}),(0,e.jsx)(t.td,{children:"Once"})]}),(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:"3. VU code"}),(0,e.jsx)(t.td,{children:"Run the test function, usually default"}),(0,e.jsx)(t.td,{children:"Make https requests, validate responses"}),(0,e.jsx)(t.td,{children:"Once per iteration, as many times as the test options require"})]}),(0,e.jsxs)(t.tr,{children:[(0,e.jsx)(t.td,{children:"4. Teardown"}),(0,e.jsx)(t.td,{children:"Process result of setup code, stop test environment"}),(0,e.jsx)(t.td,{children:"Validate that setup had a certain result, send webhook notifying that test has finished"}),(0,e.jsx)(t.td,{children:"Once **"})]})]})]}),"\n",(0,e.jsxs)(t.blockquote,{children:["\n",(0,e.jsxs)(t.p,{children:["Co\u0301 m\xf4\u0323t l\u01b0u y\u0301 la\u0300 n\xea\u0301u ",(0,e.jsx)(t.code,{children:"setup"})," bi\u0323 l\xf4\u0303i ( ne\u0301m ra ngoa\u0323i l\xea\u0323 ) thi\u0300 ",(0,e.jsx)(t.code,{children:"teardown"})," se\u0303 kh\xf4ng \u0111\u01b0\u01a1\u0323c go\u0323i vi\u0300 th\xea\u0301 chu\u0301ng ta c\xe2\u0300n x\u01b0\u0309 ly\u0301 l\xf4\u0303i h\xea\u0301t s\u01b0\u0301c co\u0301 th\xea\u0309 khi ",(0,e.jsx)(t.code,{children:"setup"})]}),"\n"]}),"\n",(0,e.jsxs)(t.blockquote,{children:["\n",(0,e.jsxs)(t.p,{children:["T\xe2\u0301t ca\u0309 ca\u0301c \u0111oa\u0323n code n\u0103\u0300m ngoa\u0300i lifecycle thi\u0300 \u0111\xea\u0300u \u0111\u01b0\u01a1\u0323c coi la\u0300 ",(0,e.jsx)(t.code,{children:"init"})," chu\u0301ng se\u0303 lu\xf4n \u0111\u01b0\u01a1\u0323c th\u01b0\u0323c thi \u0111\xe2\u0300u ti\xean"]}),"\n"]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="Example of init context"',children:"// init context: importing modules\nimport http from 'k6/http';\nimport { Trend } from 'k6/metrics';\n\n// init context: define k6 options\nexport const options = {\n  vus: 10,\n  duration: '30s',\n};\n\n// init context: global variables\nconst customTrend = new Trend('oneCustomMetric');\n\n// init context: define custom function\nfunction myCustomFunction() {\n  // ...\n}\n"})}),"\n",(0,e.jsx)(t.h3,{id:"setup-and-teardown-stages",children:"Setup and teardown stages"}),"\n",(0,e.jsxs)(t.p,{children:["B\u1ea1n c\xf3 th\u1ec3 g\u1ecdi API k6 trong giai \u0111o\u1ea1n ",(0,e.jsx)(t.code,{children:"setup"})," v\xe0 ",(0,e.jsx)(t.code,{children:"teardown"}),", kh\xf4ng gi\u1ed1ng nh\u01b0 giai \u0111o\u1ea1n ",(0,e.jsx)(t.code,{children:"init"}),". V\xed d\u1ee5, b\u1ea1n c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n c\xe1c y\xeau c\u1ea7u HTTP:"]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"// K6 Modules ref: https://k6.io/docs/using-k6/modules/\nimport http from 'k6/http';\n\nexport function setup() {\n  const res = http.get('https://httpbin.test.k6.io/get');\n  return { data: res.json() };\n}\n\nexport function teardown(data) {\n  console.log(JSON.stringify(data));\n}\n\nexport default function (data) {\n  console.log(JSON.stringify(data));\n}\n\n"})}),"\n",(0,e.jsxs)(t.p,{children:["B\u1ea1n c\xf3 th\u1ec3 \u0111\xe3 nh\u1eadn th\u1ea5y c\xe1c tham s\xf4\u0301 h\xe0m c\u1ee7a ",(0,e.jsx)(t.code,{children:"default()"})," V\xe0 ",(0,e.jsx)(t.code,{children:"teardown()"})," l\u1ea5y m\u1ed9t \u0111\u1ed1i s\u1ed1, \u0111\u01b0\u1ee3c g\u1ecdi \u1edf vi\u0301 du\u0323 tr\xean la\u0300 ",(0,e.jsx)(t.code,{children:"data"}),".\nCo\u0301 m\xf4\u0323t s\xf4\u0301 ha\u0323n ch\xea\u0301 sau"]}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsxs)(t.li,{children:["B\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 truy\u1ec1n d\u1eef li\u1ec7u (t\u1ee9c l\xe0 JSON) gi\u1eefa ",(0,e.jsx)(t.code,{children:"setup"})," c\xe1c giai \u0111o\u1ea1n kh\xe1c. B\u1ea1n kh\xf4ng th\u1ec3 truy\u1ec1n va\u0300o ca\u0301c function."]}),"\n",(0,e.jsxs)(t.li,{children:["N\u1ebfu d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1 b\u1edfi ",(0,e.jsx)(t.code,{children:"setup()"})," l\u1edbn s\u1ebd t\u1ed1n nhi\u1ec1u b\u1ed9 nh\u1edb h\u01a1n."]}),"\n",(0,e.jsxs)(t.li,{children:["B\u1ea1n kh\xf4ng th\u1ec3 thao t\xe1c d\u1eef li\u1ec7u trong ",(0,e.jsx)(t.code,{children:"default()"}),", sau \u0111\xf3 chuy\u1ec3n n\xf3 cho ",(0,e.jsx)(t.code,{children:"teardown()"}),"."]}),"\n"]}),"\n",(0,e.jsx)("center",{children:(0,e.jsx)(t.img,{src:"https://gist.github.com/user-attachments/assets/4812d42a-9e69-4ce4-b6c7-ea3518706461",alt:"image"})}),"\n",(0,e.jsx)(t.h3,{id:"modules",children:"Modules"}),"\n",(0,e.jsx)(t.p,{children:"Vi\xea\u0323c vi\xea\u0301t script k6 co\u0301 th\xea\u0309 s\u01b0\u0309 du\u0323ng nhi\xea\u0300u modules kha\u0301c nhau, trong k6 co\u0301 3 ki\xea\u0309u import modules nh\u01b0 sau :"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"Built-in modules"}),"\n",(0,e.jsx)(t.li,{children:"Local filesystem modules"}),"\n",(0,e.jsx)(t.li,{children:"Remote HTTP(S) modules"}),"\n"]}),"\n",(0,e.jsx)(t.h4,{id:"built-in-modules",children:"Built-in modules"}),"\n",(0,e.jsxs)(t.p,{children:["K6 co\u0301 ti\u0301ch h\u01a1\u0323p nhi\xea\u0300u loa\u0323i module kha\u0301c nhau, th\u01b0\u01a1\u0300ng th\xe2\u0301y nh\xe2\u0301t la\u0300 ",(0,e.jsx)(t.code,{children:"http"}),", \u0111\xea\u0309 \u0111o\u0323c v\xea\u0300 ta\u0300i li\xea\u0323u API cu\u0309a module co\u0301 th\xea\u0309 tham kha\u0309o ta\u0323i \u0111\xe2y\n",(0,e.jsx)(t.a,{href:"https://k6.io/docs/javascript-api/",children:"https://k6.io/docs/javascript-api/"})]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",children:"import http from 'k6/http';\n"})}),"\n",(0,e.jsx)(t.h4,{id:"local-filesystem-modules",children:"Local filesystem modules"}),"\n",(0,e.jsx)(t.p,{children:"C\xe1c module n\xe0y \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef tr\xean h\u1ec7 th\u1ed1ng t\u1ec7p c\u1ee5c b\u1ed9 v\xe0 \u0111\u01b0\u1ee3c truy c\u1eadp th\xf4ng qua \u0111\u01b0\u1eddng d\u1eabn h\u1ec7 th\u1ed1ng t\u1ec7p t\u01b0\u01a1ng \u0111\u1ed1i ho\u1eb7c tuy\u1ec7t \u0111\u1ed1i"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="helper.js"',children:"export function someHelper() {\n  // ...\n}\n"})}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="mytest.js"',children:"import { someHelper } from './helpers.js';\n\nexport default function () {\n  someHelper();\n}\n"})}),"\n",(0,e.jsx)(t.h4,{id:"remote-https-modules",children:"Remote HTTP(S) modules"}),"\n",(0,e.jsxs)(t.p,{children:["C\xe1c module n\xe0y \u0111\u01b0\u1ee3c truy c\u1eadp qua HTTP(S), t\u1eeb m\u1ed9t ngu\u1ed3n nh\u01b0 ",(0,e.jsx)(t.a,{href:"https://k6.io/docs/using-k6/modules/#the-jslib-repository",children:"k6 JSLib"})," ho\u1eb7c t\u1eeb b\u1ea5t k\u1ef3 m\xe1y ch\u1ee7 web n\xe0o c\xf3 th\u1ec3 truy c\u1eadp c\xf4ng khai"]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="test.js"',children:"import { randomItem } from 'https://jslib.k6.io/k6-utils/1.2.0/index.js';\n\nexport default function () {\n  randomItem();\n}\n"})}),"\n",(0,e.jsxs)(t.blockquote,{children:["\n",(0,e.jsxs)(t.p,{children:["Tham kha\u0309o th\xeam remote modules: ",(0,e.jsx)(t.a,{href:"https://jslib.k6.io/",children:"https://jslib.k6.io/"})," ."]}),"\n"]}),"\n",(0,e.jsx)(t.h3,{id:"metrics",children:"Metrics"}),"\n",(0,e.jsx)(t.p,{children:"Khi th\u01b0\u0323c hi\xea\u0323n cha\u0323y 1 ki\u0323ch ba\u0309n test v\u01a1\u0301i k6, ngoa\u0300i vi\xea\u0323c \u0111a\u0309m ba\u0309o ki\u0323ch ba\u0309n cha\u0323y tha\u0300nh c\xf4ng kh\xf4ng g\u0103\u0323p l\xf4\u0303i t\u01b0\u0300 API thi\u0300 v\xea\u0300 output cu\u0309a K6 cu\u0303ng cho chu\u0301ng ta r\xe2\u0301t nhi\xea\u0300u\nca\u0301c metrics kha\u0301c nhau, nh\u01b0 vi\u0301 du\u0323 d\u01b0\u01a1\u0301i \u0111\xe2y"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="test.js"',children:"import http from 'k6/http';\n\nexport default function () {\n  http.get('https://test-api.k6.io/');\n}\n\n"})}),"\n",(0,e.jsx)(t.p,{children:"Th\u01b0\u0323c hi\xea\u0323n cha\u0323y command"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"k6 run test.js\n"})}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",metastring:'title="output"',children:"k6 run script.js\n\n          /\\      |\u203e\u203e| /\u203e\u203e/   /\u203e\u203e/\n     /\\  /  \\     |  |/  /   /  /\n    /  \\/    \\    |     (   /   \u203e\u203e\\\n   /          \\   |  |\\  \\ |  (\u203e)  |\n  / __________ \\  |__| \\__\\ \\_____/ .io\n\n  execution: local\n     script: http_get.js\n     output: -\n\n  scenarios: (100.00%) 1 scenario, 1 max VUs, 10m30s max duration (incl. graceful stop):\n           * default: 1 iterations for each of 1 VUs (maxDuration: 10m0s, gracefulStop: 30s)\n\n\nrunning (00m03.8s), 0/1 VUs, 1 complete and 0 interrupted iterations\ndefault \u2713 [======================================] 1 VUs  00m03.8s/10m0s  1/1 iters, 1 per VU\n\n     data_received..................: 22 kB 5.7 kB/s\n     data_sent......................: 742 B 198 B/s\n     http_req_blocked...............: avg=1.05s    min=1.05s    med=1.05s    max=1.05s    p(90)=1.05s    p(95)=1.05s\n     http_req_connecting............: avg=334.26ms min=334.26ms med=334.26ms max=334.26ms p(90)=334.26ms p(95)=334.26ms\n     http_req_duration..............: avg=2.7s     min=2.7s     med=2.7s     max=2.7s     p(90)=2.7s     p(95)=2.7s\n       { expected_response:true }...: avg=2.7s     min=2.7s     med=2.7s     max=2.7s     p(90)=2.7s     p(95)=2.7s\n     http_req_failed................: 0.00% \u2713 0        \u2717 1\n     http_req_receiving.............: avg=112.41\xb5s min=112.41\xb5s med=112.41\xb5s max=112.41\xb5s p(90)=112.41\xb5s p(95)=112.41\xb5s\n     http_req_sending...............: avg=294.48\xb5s min=294.48\xb5s med=294.48\xb5s max=294.48\xb5s p(90)=294.48\xb5s p(95)=294.48\xb5s\n     http_req_tls_handshaking.......: avg=700.6ms  min=700.6ms  med=700.6ms  max=700.6ms  p(90)=700.6ms  p(95)=700.6ms\n     http_req_waiting...............: avg=2.7s     min=2.7s     med=2.7s     max=2.7s     p(90)=2.7s     p(95)=2.7s\n     http_reqs......................: 1     0.266167/s\n     iteration_duration.............: avg=3.75s    min=3.75s    med=3.75s    max=3.75s    p(90)=3.75s    p(95)=3.75s\n     iterations.....................: 1     0.266167/s\n     vus............................: 1     min=1      max=1\n     vus_max........................: 1     min=1      max=1\n"})}),"\n",(0,e.jsxs)(t.p,{children:["V\xe2\u0323y chu\u0301ng ta n\xean quan t\xe2m nh\u01b0\u0303ng ",(0,e.jsx)(t.strong,{children:"metrics na\u0300o"})," ?"]}),"\n",(0,e.jsx)(t.p,{children:"Theo kinh nghi\xea\u0323m cu\u0309a mi\u0300nh, vi\xea\u0323c quan t\xe2m t\u01a1\u0301i ca\u0301c metrics na\u0300o co\u0300n phu\u0323 thu\xf4\u0323c va\u0300o mu\u0323c ti\xeau ki\xea\u0309m th\u01b0\u0309 cu\u0309a chu\u0301ng ta, th\xf4ng th\u01b0\u01a1\u0300ng co\u0301 3 metrics sau mi\u0300nh th\xe2\u0301y hay quan t\xe2m nh\xe2\u0301t"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.strong,{children:"http_reqs"}),", to measure requests"]}),"\n",(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.strong,{children:"http_req_failed"}),", to measure error rate"]}),"\n",(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.strong,{children:"http_req_duration"}),", to measure duration"]}),"\n"]}),"\n",(0,e.jsx)(t.h3,{id:"checks",children:"Checks"}),"\n",(0,e.jsxs)(t.p,{children:["Checks trong k6 la\u0300 m\xf4\u0323t kha\u0301i ni\xea\u0323m mu\u0323c \u0111i\u0301ch \u0111\xea\u0309 mi\u0300nh th\u01b0\u0323c hi\xea\u0323n check validation boolean condition, trong khu\xf4n kh\xf4\u0309 ca\u0301c testing framework kha\u0301c no\u0301 gi\xf4\u0301ng nh\u01b0 la\u0300 ",(0,e.jsx)(t.code,{children:"assert"})]}),"\n",(0,e.jsx)(t.h4,{id:"check-for-http-response-code",children:"Check for HTTP response code"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"import { check } from 'k6';\nimport http from 'k6/http';\n\nexport default function () {\n  const res = http.get('http://test.k6.io/');\n  check(res, {\n    'is status 200': (r) => r.status === 200,\n  });\n}\n"})}),"\n",(0,e.jsx)(t.h4,{id:"check-for-text-in-response-body",children:"Check for text in response body"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"import { check } from 'k6';\nimport http from 'k6/http';\n\nexport default function () {\n  const res = http.get('http://test.k6.io/');\n  check(res, {\n    'verify homepage text': (r) =>\n      r.body.includes('Collection of simple web-pages suitable for load testing'),\n  });\n}\n"})}),"\n",(0,e.jsx)(t.h4,{id:"theo-do\u0303i-ti\u0309-l\xea\u0323-check-passed-\u01a1\u0309-output",children:"Theo do\u0303i ti\u0309 l\xea\u0323 check passed \u01a1\u0309 output"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",metastring:'title="output"',children:"k6 run script.js\n\n  ...\n    \u2713 is status 200\n\n  ...\n  checks.........................: 100.00% \u2713 1        \u2717 0\n  data_received..................: 11 kB   12 kB/s\n"})}),"\n",(0,e.jsx)(t.h3,{id:"ng\u01b0\u1ee1ng-thresholds",children:"Ng\u01b0\u1ee1ng (Thresholds)"}),"\n",(0,e.jsx)(t.p,{children:"Ng\u01b0\u1ee1ng (thresholds) l\xe0 ti\xeau ch\xed \u0111\u1ec3 \u0111\xe1nh gi\xe1 k\u1ebft qu\u1ea3 \u0111\u1ea1t/kh\xf4ng \u0111\u1ea1t cho c\xe1c ch\u1ec9 s\u1ed1 trong b\xe0i ki\u1ec3m th\u1eed. N\u1ebfu h\u1ec7 th\u1ed1ng ki\u1ec3m th\u1eed (SUT) kh\xf4ng \u0111\xe1p \u1ee9ng c\xe1c ng\u01b0\u1ee1ng n\xe0y, b\xe0i ki\u1ec3m th\u1eed s\u1ebd b\u1ecb \u0111\xe1nh gi\xe1 l\xe0 th\u1ea5t b\u1ea1i."}),"\n",(0,e.jsx)(t.p,{children:"Ng\u01b0\u1ee1ng th\u01b0\u1eddng \u0111\u01b0\u1ee3c d\xf9ng \u0111\u1ec3 x\xe1c \u0111\u1ecbnh c\xe1c SLO (Service Level Objectives), v\xed d\u1ee5:"}),"\n",(0,e.jsxs)(t.ul,{children:["\n",(0,e.jsx)(t.li,{children:"D\u01b0\u1edbi 1% y\xeau c\u1ea7u tr\u1ea3 v\u1ec1 l\u1ed7i."}),"\n",(0,e.jsx)(t.li,{children:"95% y\xeau c\u1ea7u c\xf3 th\u1eddi gian ph\u1ea3n h\u1ed3i d\u01b0\u1edbi 200ms."}),"\n",(0,e.jsx)(t.li,{children:"99% y\xeau c\u1ea7u c\xf3 th\u1eddi gian ph\u1ea3n h\u1ed3i d\u01b0\u1edbi 400ms."}),"\n",(0,e.jsx)(t.li,{children:"M\u1ed9t endpoint c\u1ee5 th\u1ec3 lu\xf4n ph\u1ea3n h\u1ed3i trong 300ms."}),"\n",(0,e.jsx)(t.li,{children:"C\xe1c \u0111i\u1ec1u ki\u1ec7n cho ch\u1ec9 s\u1ed1 t\xf9y ch\u1ec9nh."}),"\n"]}),"\n",(0,e.jsx)(t.p,{children:"Ng\u01b0\u1ee1ng c\u0169ng r\u1ea5t quan tr\u1ecdng trong vi\u1ec7c t\u1ef1 \u0111\u1ed9ng h\xf3a ki\u1ec3m th\u1eed t\u1ea3i:"}),"\n",(0,e.jsxs)(t.ol,{children:["\n",(0,e.jsx)(t.li,{children:"Thi\u1ebft l\u1eadp ng\u01b0\u1ee1ng cho b\xe0i ki\u1ec3m th\u1eed."}),"\n",(0,e.jsx)(t.li,{children:"T\u1ef1 \u0111\u1ed9ng h\xf3a qu\xe1 tr\xecnh ki\u1ec3m th\u1eed."}),"\n",(0,e.jsx)(t.li,{children:"C\u1ea5u h\xecnh c\u1ea3nh b\xe1o khi ki\u1ec3m th\u1eed th\u1ea5t b\u1ea1i.\nKhi thi\u1ebft l\u1eadp ng\u01b0\u1ee1ng, n\u1ebfu \u0111i\u1ec1u ki\u1ec7n kh\xf4ng \u0111\u1ea1t, b\xe0i ki\u1ec3m th\u1eed s\u1ebd b\u1ecb coi l\xe0 th\u1ea5t b\u1ea1i."}),"\n"]}),"\n",(0,e.jsx)(t.h4,{id:"vi\u0301-du\u0323-threshold-cho-http-error-va\u0300-response-time",children:"Vi\u0301 du\u0323 threshold cho http error va\u0300 response time"}),"\n",(0,e.jsx)(t.p,{children:"V\xed d\u1ee5 d\u01b0\u1edbi \u0111\xe2y thi\u1ebft l\u1eadp hai ng\u01b0\u1ee1ng: m\u1ed9t ng\u01b0\u1ee1ng \u0111\xe1nh gi\xe1 t\u1ef7 l\u1ec7 l\u1ed7i HTTP (http_req_failed), v\xe0 m\u1ed9t ng\u01b0\u1ee1ng \u0111\xe1nh gi\xe1 95% ph\u1ea3n h\u1ed3i trong kho\u1ea3ng th\u1eddi gian nh\u1ea5t \u0111\u1ecbnh (http_req_duration)."}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"import http from 'k6/http';\n\nexport const options = {\n  thresholds: {\n    http_req_failed: ['rate<0.01'], // http errors should be less than 1%\n    http_req_duration: ['p(95)<200'], // 95% of requests should be below 200ms\n  },\n};\n\nexport default function () {\n  http.get('https://test-api.k6.io/public/crocodiles/1/');\n}\n"})}),"\n",(0,e.jsxs)(t.blockquote,{children:["\n",(0,e.jsxs)(t.p,{children:["Tham kha\u0309o th\xeam ",(0,e.jsx)(t.code,{children:"options"})," API ta\u0323i ",(0,e.jsx)(t.a,{href:"https://k6.io/docs/using-k6/k6-options/reference/",children:"https://k6.io/docs/using-k6/k6-options/reference/"})]}),"\n"]}),"\n",(0,e.jsx)(t.h2,{id:"bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng-environment-variables",children:"Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng (Environment Variables)"}),"\n",(0,e.jsx)(t.p,{children:"Th\u01b0\u1eddng th\xec c\xe1c script ch\u1ec9 c\u1ea7n \u0111i\u1ec1u ch\u1ec9nh nh\u1ecf \u0111\u1ec3 t\xe1i s\u1eed d\u1ee5ng trong c\xe1c b\u1ed1i c\u1ea3nh kh\xe1c nhau. Thay v\xec t\u1ea1o ra nhi\u1ec1u script ri\xeang bi\u1ec7t cho c\xe1c m\xf4i tr\u01b0\u1eddng kh\xe1c nhau, b\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng bi\u1ebfn m\xf4i tr\u01b0\u1eddng \u0111\u1ec3 l\xe0m cho c\xe1c ph\u1ea7n c\u1ee7a script d\u1ec5 \u0111i\u1ec1u ch\u1ec9nh h\u01a1n."}),"\n",(0,e.jsx)(t.h3,{id:"truy\u1ec1n-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng-v\xe0o-script-k6",children:"Truy\u1ec1n Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng v\xe0o Script k6"}),"\n",(0,e.jsx)(t.p,{children:"Trong k6, c\xe1c bi\u1ebfn m\xf4i tr\u01b0\u1eddng \u0111\u01b0\u1ee3c truy c\u1eadp th\xf4ng qua bi\u1ebfn to\xe0n c\u1ee5c __ENV, l\xe0 m\u1ed9t \u0111\u1ed1i t\u01b0\u1ee3ng JS."}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",children:"import http from 'k6/http';\nimport { sleep } from 'k6';\n\nexport default function () {\n  const res = http.get(`http://${__ENV.MY_HOSTNAME}/`);\n  sleep(1);\n}\n"})}),"\n",(0,e.jsx)(t.p,{children:"C\xe1ch khuy\u1ebfn ngh\u1ecb \u0111\u1ec3 truy\u1ec1n bi\u1ebfn m\xf4i tr\u01b0\u1eddng v\xe0o script l\xe0 s\u1eed d\u1ee5ng flag -e ho\u1eb7c --env tr\xean CLI:"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"$ k6 run -e MY_HOSTNAME=test.k6.io script.js\n"})}),"\n",(0,e.jsx)(t.h3,{id:"c\u1ea5u-h\xecnh-options-k6-b\u1eb1ng-bi\u1ebfn-m\xf4i-tr\u01b0\u1eddng",children:"C\u1ea5u H\xecnh Options k6 B\u1eb1ng Bi\u1ebfn M\xf4i Tr\u01b0\u1eddng"}),"\n",(0,e.jsx)(t.p,{children:"B\u1ea1n c\u0169ng c\xf3 th\u1ec3 c\u1ea5u h\xecnh c\xe1c t\xf9y ch\u1ecdn c\u1ee7a k6 b\u1eb1ng bi\u1ebfn m\xf4i tr\u01b0\u1eddng. V\xed d\u1ee5:"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",children:"import http from 'k6/http';\nimport { sleep } from 'k6';\n\nexport default function () {\n  const res = http.get('https://test.k6.io');\n  sleep(1);\n}\n"})}),"\n",(0,e.jsx)(t.p,{children:"M\u1eb7c \u0111\u1ecbnh, script n\xe0y s\u1ebd ch\u1ea1y m\u1ed9t l\u1ea7n l\u1eb7p v\u1edbi m\u1ed9t ng\u01b0\u1eddi d\xf9ng \u1ea3o (VU). \u0110\u1ec3 thay \u0111\u1ed5i h\xe0nh vi m\u1eb7c \u0111\u1ecbnh, b\u1ea1n c\xf3 th\u1ec3 truy\u1ec1n c\xe1c t\xf9y ch\u1ecdn k6 qua bi\u1ebfn m\xf4i tr\u01b0\u1eddng:"}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-bash",children:"$ K6_VUS=10 K6_DURATION=10s k6 run script.js\n"})}),"\n",(0,e.jsx)(t.h3,{id:"l\u01b0u-y\u0301-gi\u01b0\u0303a-atlas-va\u0300-k6-env",children:"L\u01b0u y\u0301 gi\u01b0\u0303a Atlas va\u0300 K6 ENV"}),"\n",(0,e.jsxs)(t.p,{children:["Co\u0301 m\xf4\u0323t l\u01b0u y\u0301 nho\u0309 la\u0300 trong qua\u0301 tri\u0300nh vi\xea\u0301t script n\xea\u0301u cha\u0323y b\u0103\u0300ng k6 cloud ho\u0103\u0323c k6 cli (local ho\u0103\u0323c CI/CD) chu\u0301ng ta co\u0301 th\xea\u0309 s\u01b0\u0309 du\u0323ng bi\xea\u0301n m\xf4i tr\u01b0\u01a1\u0300ng ",(0,e.jsx)(t.code,{children:"__ENV"}),"\ntuy nhi\xean n\xea\u0301u script \u0111\u01b0\u01a1\u0323c vi\xea\u0301t va\u0300 cha\u0323y tr\xean h\xea\u0323 th\xf4\u0301ng ",(0,e.jsx)(t.strong,{children:"Atlas"})," se\u0303 c\xe2\u0300n s\u01b0\u0309a bi\xea\u0301n m\xf4i tr\u01b0\u01a1\u0300ng tha\u0300nh ",(0,e.jsx)(t.code,{children:"__SECRET"})]}),"\n",(0,e.jsx)(t.h2,{id:"v\xed-d\u1ee5-k\u1ecbch-b\u1ea3n-ki\u1ec3m-th\u1eed-\u0111\u0103ng-nh\u1eadp-v\xe0-l\u1ea5y-th\xf4ng-tin-ng\u01b0\u1eddi-d\xf9ng",children:"V\xed D\u1ee5: K\u1ecbch B\u1ea3n Ki\u1ec3m Th\u1eed \u0110\u0103ng Nh\u1eadp V\xe0 L\u1ea5y Th\xf4ng Tin Ng\u01b0\u1eddi D\xf9ng"}),"\n",(0,e.jsx)(t.p,{children:"Trong v\xed d\u1ee5 n\xe0y, ch\xfang ta s\u1ebd th\u1ef1c hi\u1ec7n m\u1ed9t k\u1ecbch b\u1ea3n ki\u1ec3m th\u1eed v\u1edbi m\u1ee5c ti\xeau ki\u1ec3m tra hi\u1ec7u su\u1ea5t c\u1ee7a h\u1ec7 th\u1ed1ng \u0111\u0103ng nh\u1eadp v\xe0 l\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng. K\u1ecbch b\u1ea3n n\xe0y s\u1eed d\u1ee5ng c\xf4ng c\u1ee5 K6 \u0111\u1ec3 m\xf4 ph\u1ecfng vi\u1ec7c \u0111\u0103ng nh\u1eadp c\u1ee7a nhi\u1ec1u ng\u01b0\u1eddi d\xf9ng \u1ea3o (VU - Virtual Users) v\xe0o h\u1ec7 th\u1ed1ng v\xe0 truy xu\u1ea5t th\xf4ng tin t\xe0i kho\u1ea3n c\u1ee7a h\u1ecd. K\u1ecbch b\u1ea3n \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf v\u1edbi hai ph\u1ea7n ch\xednh: setup \u0111\u1ec3 chu\u1ea9n b\u1ecb d\u1eef li\u1ec7u v\xe0 LOAD_TESTING_NORMAL_TIMES \u0111\u1ec3 th\u1ef1c hi\u1ec7n ki\u1ec3m th\u1eed."}),"\n",(0,e.jsx)(t.h3,{id:"c\u1ea5u-h\xecnh-k\u1ecbch-b\u1ea3n",children:"C\u1ea5u H\xecnh K\u1ecbch B\u1ea3n"}),"\n",(0,e.jsx)(t.p,{children:"K\u1ecbch b\u1ea3n \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh \u0111\u1ec3 ch\u1ea1y m\u1ed9t b\xe0i ki\u1ec3m th\u1eed t\u1ea3i nh\u1eb9 (smoke test) v\u1edbi 6 ng\u01b0\u1eddi d\xf9ng \u1ea3o, m\u1ed7i ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n 6 l\u1ea7n l\u1eb7p. Th\u1eddi gian t\u1ed1i \u0111a cho m\u1ed7i phi\xean ki\u1ec3m th\u1eed l\xe0 3 ph\xfat v\xe0 th\u1eddi gian d\u1eebng an to\xe0n l\xe0 30 gi\xe2y. M\u1ee5c ti\xeau c\u1ee7a k\u1ecbch b\u1ea3n l\xe0 \u0111\u1ea3m b\u1ea3o r\u1eb1ng 95% c\xe1c y\xeau c\u1ea7u HTTP ho\xe0n th\xe0nh trong v\xf2ng 5000ms."}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"export const options = {\n    thresholds: { http_req_duration: [\"p(95)<5000\"] },\n    scenarios: {\n        smoke_test: {\n            executor: 'per-vu-iterations',\n            exec: 'LOAD_TESTING_NORMAL_TIMES',\n            vus: 6,\n            iterations: 6,\n            gracefulStop: '30s',\n            maxDuration: '3m',\n        },\n    },\n};\n"})}),"\n",(0,e.jsx)(t.h3,{id:"ph\u1ea7n-setup-chu\u1ea9n-b\u1ecb-t\xe0i-kho\u1ea3n-\u0111\u0103ng-nh\u1eadp",children:"Ph\u1ea7n Setup: Chu\u1ea9n B\u1ecb T\xe0i Kho\u1ea3n \u0110\u0103ng Nh\u1eadp"}),"\n",(0,e.jsx)(t.p,{children:"Trong ph\u1ea7n setup, ch\xfang ta t\u1ea1o ra m\u1ed9t danh s\xe1ch c\xe1c t\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng gi\u1ea3 \u0111\u1ecbnh \u0111\u1ec3 s\u1eed d\u1ee5ng trong qu\xe1 tr\xecnh ki\u1ec3m th\u1eed. M\u1ed7i ng\u01b0\u1eddi d\xf9ng \u1ea3o s\u1ebd \u0111\u01b0\u1ee3c g\xe1n m\u1ed9t t\xe0i kho\u1ea3n duy nh\u1ea5t. Vi\u1ec7c t\u1ea1o tr\u01b0\u1edbc danh s\xe1ch t\xe0i kho\u1ea3n gi\xfap qu\xe1 tr\xecnh ki\u1ec3m th\u1eed di\u1ec5n ra m\u01b0\u1ee3t m\xe0 h\u01a1n m\xe0 kh\xf4ng c\u1ea7n ph\u1ea3i t\u1ea1o t\xe0i kho\u1ea3n trong m\u1ed7i l\u1ea7n l\u1eb7p."}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:"export function setup() {\n  const accounts = [];\n\n  for (let X = 1; X <= 30; X++) {\n      for (let Y = 1; Y <= 10; Y++) {\n          accounts.push(`accountVU+${X}-${Y}@sun-asterisk.com`);\n      }\n  }\n\n  return accounts;\n}\n"})}),"\n",(0,e.jsx)(t.h3,{id:"ph\u1ea7n-th\u1ef1c-thi-\u0111\u0103ng-nh\u1eadp-v\xe0-l\u1ea5y-th\xf4ng-tin-ng\u01b0\u1eddi-d\xf9ng",children:"Ph\u1ea7n Th\u1ef1c Thi: \u0110\u0103ng Nh\u1eadp V\xe0 L\u1ea5y Th\xf4ng Tin Ng\u01b0\u1eddi D\xf9ng"}),"\n",(0,e.jsx)(t.p,{children:"Trong h\xe0m LOAD_TESTING_NORMAL_TIMES, m\u1ed7i ng\u01b0\u1eddi d\xf9ng \u1ea3o s\u1ebd th\u1ef1c hi\u1ec7n c\xe1c b\u01b0\u1edbc sau:"}),"\n",(0,e.jsxs)(t.ol,{children:["\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"L\u1ea5y Token XSRF"}),": M\u1ed7i phi\xean \u0111\u0103ng nh\u1eadp b\u1eaft \u0111\u1ea7u b\u1eb1ng vi\u1ec7c g\u1eedi y\xeau c\u1ea7u GET \u0111\u1ec3 l\u1ea5y token XSRF t\u1eeb m\xe1y ch\u1ee7. Token n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 b\u1ea3o v\u1ec7 c\xe1c y\xeau c\u1ea7u ti\u1ebfp theo kh\u1ecfi c\xe1c cu\u1ed9c t\u1ea5n c\xf4ng CSRF."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"\u0110\u0103ng Nh\u1eadp"}),": S\u1eed d\u1ee5ng token XSRF v\u1eeba l\u1ea5y \u0111\u01b0\u1ee3c, ng\u01b0\u1eddi d\xf9ng s\u1ebd g\u1eedi y\xeau c\u1ea7u POST \u0111\u1ec3 \u0111\u0103ng nh\u1eadp v\xe0o h\u1ec7 th\u1ed1ng v\u1edbi t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u01b0\u1ee3c c\u1ea5p. Cookie v\xe0 token x\xe1c th\u1ef1c s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i \u0111\u1ec3 s\u1eed d\u1ee5ng cho c\xe1c y\xeau c\u1ea7u ti\u1ebfp theo."]}),"\n"]}),"\n",(0,e.jsxs)(t.li,{children:["\n",(0,e.jsxs)(t.p,{children:[(0,e.jsx)(t.strong,{children:"L\u1ea5y Th\xf4ng Tin Ng\u01b0\u1eddi D\xf9ng"}),": Sau khi \u0111\u0103ng nh\u1eadp th\xe0nh c\xf4ng, ng\u01b0\u1eddi d\xf9ng g\u1eedi y\xeau c\u1ea7u GET \u0111\u1ec3 truy xu\u1ea5t th\xf4ng tin c\xe1 nh\xe2n t\u1eeb h\u1ec7 th\u1ed1ng."]}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(t.pre,{children:(0,e.jsx)(t.code,{className:"language-jsx",metastring:'title="script.js"',children:'export function LOAD_TESTING_NORMAL_TIMES(accounts) {\n    let response;\n    \n    if (!cookie[accounts[__VU - 1]]) {\n        response = http.get(apiUrl + "/api/sanctum/csrf-cookie", {\n            headers: {\n                Referer: url,\n            },\n        });\n\n        xsrfToken[__VU - 1] = decodeURIComponent(\n            response.headers["Set-Cookie"].split(";")[0].split("=")[1]\n        );\n  \n        response = http.post(\n            apiUrl + "/api/auth/login",\n            JSON.stringify({\n                email: accounts[__VU - 1],\n                password: "Aa@123456",\n            }),\n            {\n                headers: {\n                    Accept: "application/json",\n                    "Content-Type": "application/json",\n                    "X-XSRF-TOKEN": xsrfToken[__VU - 1],\n                    Referer: url,\n                },\n            }\n        );\n        cookie[__VU - 1] = response.headers["Set-Cookie"].split(";")[0] + \';\' + response.headers["Set-Cookie"].split(";")[6].split(\',\')[1];\n    }\n  \n  http.get(apiUrl + "/api/me", {\n    headers: {\n      Accept: "application/json",\n      Cookie: cookie[__VU - 1],\n      Referer: url,\n    },\n  });\n}\n'})}),"\n",(0,e.jsxs)(t.p,{children:["\u01a0\u0309 tr\xean la\u0300 vi\u0301 du\u0323 v\xea\u0300 m\xf4\u0323t ki\u0323ch ba\u0309n ki\xea\u0309m th\u01b0\u0309 hi\xea\u0323u su\xe2\u0301t lu\xf4\u0300ng \u0111\u0103ng nh\xe2\u0323p va\u0300 l\xe2\u0301y th\xf4ng tin ng\u01b0\u01a1\u0300i du\u0300ng ( s\u01b0\u0309 du\u0323ng cookie ) se\u0303 co\u0301 nh\u01b0\u0303ng ki\u0323ch ba\u0309n kha\u0301c t\u01b0\u01a1ng t\u01b0\u0323 nh\u01b0ng la\u0300 JWT Token ho\u0103\u0323c co\u0301 s\u01b0\u0309 du\u0323ng Basic Auth thi\u0300 chi\u0309 thay \u0111\xf4\u0309i m\xf4\u0323t chu\u0301t v\xea\u0300 lu\xf4\u0300ng \u01a1\u0309 tr\xean, \u01a1\u0309 trong ki\u0323ch ba\u0309n na\u0300y kh\xf4ng s\u01b0\u0309 du\u0323ng ",(0,e.jsx)(t.code,{children:"default()"})," ma\u0300 \u0111\u0103\u0323t t\xean ha\u0300m la\u0300 ",(0,e.jsx)(t.code,{children:"LOAD_TESTING_NORMAL_TIMES"})," mu\u0323c \u0111i\u0301ch la\u0300 trong options chu\u0301ng ta co\u0301 th\xea\u0309 co\u0301 nhi\xea\u0300u ",(0,e.jsx)(t.code,{children:"scenarios"})," ki\u0323ch ba\u0309n kha\u0301c nhau va\u0300 co\u0301 th\xea\u0309 vi\xea\u0301t nhi\xea\u0300u function th\u01b0\u0323c thi test t\u01b0\u01a1ng \u01b0\u0301ng v\u01a1\u0301i m\xf4\u0303i ki\u0323ch ba\u0309n kha\u0301c nhau."]})]})}function d(n={}){const{wrapper:t}={...(0,h.R)(),...n.components};return t?(0,e.jsx)(t,{...n,children:(0,e.jsx)(a,{...n})}):a(n)}},8453:(n,t,i)=>{i.d(t,{R:()=>s,x:()=>r});var e=i(6540);const h={},c=e.createContext(h);function s(n){const t=e.useContext(c);return e.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function r(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(h):n.components||h:s(n.components),e.createElement(c.Provider,{value:t},n.children)}}}]);